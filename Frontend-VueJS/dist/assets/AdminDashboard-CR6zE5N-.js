import{c as L,r as u,a as T,o as yt,z as i,E as ht,b as n,d as l,e as t,k as v,f as m,u as c,S as _t,t as a,F as h,l as _,w as wt,g as j,h as kt,L as Ct,n as b,C as jt,G as qt,A,i as f,v as g,X as Le,x as be,m as Rt,I as zt,D as Ve}from"./index-DVXJlr8e.js";import{B as De}from"./book-open-FsBSsuiQ.js";import{P as Be,C as Ut,a as Mt,U as $t}from"./user-check-CDBH7yj1.js";import{S as St}from"./search-CYhJGmNK.js";/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=L("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=L("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=L("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=L("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=L("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=L("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=L("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Bt={class:"min-h-screen bg-gray-50"},Et={class:"bg-[#030213] text-white px-4 py-4"},Pt={class:"max-w-7xl mx-auto flex justify-between items-center"},Nt={class:"flex items-center gap-3"},Tt={class:"flex items-center gap-3 sm:gap-4"},Ft={class:"relative"},It={key:0,class:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center"},Ht={key:0,class:"absolute right-0 top-10 w-80 sm:w-96 bg-white rounded-xl shadow-2xl border z-50 max-h-[70vh] overflow-hidden"},Gt={class:"px-4 py-3 border-b flex items-center justify-between"},Ot={class:"overflow-y-auto max-h-[50vh]"},Jt={key:0,class:"px-4 py-8 text-center text-gray-400 text-sm"},Yt={class:"flex items-start gap-3"},Wt={class:"flex-1 min-w-0"},Xt={class:"text-sm text-gray-800"},Qt={class:"text-[11px] text-gray-400 mt-1"},Kt=["onClick"],Zt={key:0,class:"min-h-screen flex items-center justify-center"},es={key:1},ts={class:"bg-white border-b"},ss={class:"max-w-7xl mx-auto flex overflow-x-auto"},os={class:"max-w-7xl mx-auto px-4 py-8"},ls={key:0},ns={class:"flex justify-between items-center mb-6"},as={key:0,class:"text-center py-12"},rs={key:1,class:"text-center py-12 text-gray-500"},is={key:2,class:"space-y-4"},ds=["src"],us={class:"flex-1 min-w-0"},cs={class:"font-semibold text-gray-800"},ms={class:"text-sm text-gray-500 truncate"},ps={class:"flex flex-wrap gap-2 sm:gap-4 mt-1 text-xs text-gray-400"},xs={class:"bg-gray-100 px-2 py-0.5 rounded"},vs={class:"flex gap-2 flex-shrink-0 self-end sm:self-center"},fs=["onClick"],gs=["onClick"],bs={key:1},ys={class:"flex justify-between items-center mb-6"},hs={key:0,class:"text-center py-12"},_s={key:1,class:"text-center py-12 text-gray-500"},ws={key:2,class:"space-y-4"},ks={class:"w-16 h-16 sm:w-20 sm:h-20 rounded-lg bg-emerald-50 flex items-center justify-center flex-shrink-0"},Cs={class:"flex-1 min-w-0"},js={class:"flex items-center gap-2 flex-wrap"},qs={class:"font-semibold text-gray-800"},Rs={class:"text-sm text-gray-500 truncate"},zs={class:"flex flex-wrap gap-2 sm:gap-4 mt-1 text-xs text-gray-400"},Us={key:0},Ms={key:1},$s={key:2,class:"bg-gray-100 px-2 py-0.5 rounded"},Ss={class:"flex gap-2 flex-shrink-0 self-end sm:self-center"},As=["onClick"],Ls=["onClick"],Vs={key:2},Ds={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Bs={class:"lg:col-span-2"},Es={class:"flex justify-between items-center mb-6"},Ps={class:"text-sm text-gray-500"},Ns={key:0,class:"text-center py-12"},Ts={key:1,class:"text-center py-12 text-gray-500"},Fs={key:2,class:"space-y-4"},Is={class:"flex flex-col sm:flex-row sm:items-start gap-4"},Hs={class:"flex-1 min-w-0"},Gs={class:"flex items-center gap-2 flex-wrap mb-2"},Os={class:"font-semibold text-gray-800"},Js={class:"space-y-1 text-sm text-gray-600"},Ys=["href"],Ws=["href"],Xs={class:"bg-gray-100 px-2 py-0.5 rounded"},Qs={key:0,class:"mt-2 text-gray-500 italic"},Ks={class:"text-xs text-gray-400 mt-2"},Zs={class:"flex flex-wrap gap-2 flex-shrink-0"},eo=["value","onChange"],to=["onClick"],so={class:"flex justify-between items-center mb-6"},oo={class:"text-sm text-gray-500"},lo={key:0,class:"text-center py-12"},no={key:1,class:"text-center py-12 text-gray-500 bg-white rounded-xl border"},ao={key:2,class:"space-y-3"},ro={class:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0"},io={class:"flex-1 min-w-0"},uo={class:"font-semibold text-gray-800 text-sm"},co={class:"text-xs text-emerald-600"},mo={class:"text-xs text-gray-400"},po={class:"flex gap-1 flex-shrink-0"},xo=["value","onChange"],vo=["onClick"],fo={key:3},go={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},bo={class:"lg:col-span-2"},yo={class:"grid grid-cols-5 sm:grid-cols-6 lg:grid-cols-10 gap-2 mb-8"},ho=["onClick"],_o={class:"text-[10px] font-bold block"},wo={class:"text-lg font-bold block leading-tight"},ko={class:"text-[10px] block"},Co={key:0,class:"bg-white rounded-xl border p-5"},jo={class:"font-semibold text-gray-800 mb-4 text-lg"},qo={class:"mb-6"},Ro={class:"text-sm font-medium text-gray-600 mb-3"},zo={key:0,class:"text-sm text-gray-400 italic"},Uo={key:1,class:"flex flex-wrap gap-2"},Mo={class:"mb-6"},$o={key:0,class:"text-sm text-gray-400 italic mb-3"},So={key:1,class:"space-y-2 mb-4"},Ao={key:0,class:"text-[11px] bg-violet-100 text-violet-700 px-1.5 py-0.5 rounded"},Lo={key:1,class:"text-[11px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded"},Vo=["value","onChange"],Do=["value"],Bo=["value"],Eo=["onClick"],Po={key:0,class:"text-sm text-gray-400 italic"},No={key:1,class:"space-y-2"},To={class:"flex-1 min-w-0"},Fo={class:"text-sm text-gray-800"},Io={class:"text-[11px] text-gray-400 mt-0.5"},Ho=["onClick"],Go={key:1,class:"bg-white rounded-xl border p-8 text-center text-gray-400"},Oo={class:"flex justify-between items-center mb-4"},Jo={class:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium"},Yo={class:"flex gap-2"},Wo={key:0,class:"text-center py-8 text-gray-400 text-sm"},Xo={key:1,class:"space-y-2"},Qo=["onClick"],Ko={class:"flex-1 min-w-0"},Zo={class:"text-xs text-gray-400"},el=["onClick"],tl={class:"mt-6"},sl={key:0,class:"text-center py-6 text-gray-400 text-sm"},ol={key:1,class:"space-y-3"},ll={class:"flex items-center justify-between mb-2"},nl={class:"flex items-center gap-2"},al={class:"w-8 h-8 bg-violet-100 text-violet-700 rounded-lg flex items-center justify-center text-xs font-bold"},rl={class:"text-sm font-semibold text-gray-800"},il=["onClick"],dl={class:"flex flex-wrap gap-1.5"},ul={key:0},cl={class:"relative mb-6"},ml={key:0,class:"text-center py-12"},pl={key:1,class:"text-center py-12 text-gray-500"},xl={key:2,class:"space-y-3"},vl={class:"flex flex-col sm:flex-row sm:items-center gap-3"},fl={class:"flex items-center gap-3 flex-1 min-w-0"},gl={class:"min-w-0"},bl={class:"font-semibold text-gray-800"},yl={class:"text-xs text-gray-400"},hl={class:"flex items-center gap-3 self-end sm:self-center"},_l=["value","onChange"],wl={key:1,class:"text-xs text-gray-400 italic"},kl=["onClick"],Cl={class:"flex flex-wrap items-center gap-3 pl-13 text-sm border-t pt-3"},jl={class:"flex items-center gap-2 cursor-pointer"},ql=["checked","onChange"],Rl={key:0,class:"flex items-center gap-2"},zl=["value","onChange"],Ul=["value","onChange"],Ml={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},$l={class:"p-6 border-b flex justify-between items-center"},Sl={class:"text-xl font-semibold"},Al={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ll={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Vl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Dl={class:"flex flex-col sm:flex-row gap-3"},Bl={class:"flex-1 cursor-pointer"},El={class:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-xl hover:border-emerald-500 transition-colors bg-gray-50"},Pl={class:"text-sm text-gray-500"},Nl=["disabled"],Tl={key:0,class:"rounded-xl overflow-hidden border"},Fl=["src"],Il={class:"flex justify-end gap-3 pt-2"},Hl=["disabled"],Gl={class:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Ol={class:"p-6 border-b flex justify-between items-center"},Jl={class:"text-xl font-semibold"},Yl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Wl={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Xl=["value"],Ql={class:"flex flex-col sm:flex-row gap-3"},Kl={class:"flex-1 cursor-pointer"},Zl={class:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-xl hover:border-emerald-500 transition-colors bg-gray-50"},en={class:"text-sm text-gray-500"},tn=["disabled"],sn={class:"flex flex-col sm:flex-row gap-3"},on={class:"flex-1 cursor-pointer"},ln={class:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-gray-300 rounded-xl hover:border-emerald-500 transition-colors bg-gray-50"},nn={class:"text-sm text-gray-500"},an=["disabled"],rn=["src"],dn={class:"flex items-center gap-3"},un={class:"flex justify-end gap-3 pt-2"},cn=["disabled"],bn={__name:"AdminDashboard",setup(mn){const te=ht(),w=u("evenements"),q=u(!1),R=u(!1),Y=u(null),W=T(()=>{var o;return((o=Y.value)==null?void 0:o.role)==="superadmin"}),se=u(!0),M=u(""),Ne=(o,e=1200,d=.8)=>new Promise(s=>{if(!o.type.startsWith("image/")){s(o);return}if(o.size<500*1024){s(o);return}const r=new window.Image,y=document.createElement("canvas"),Se=y.getContext("2d"),P=URL.createObjectURL(o);r.onload=()=>{URL.revokeObjectURL(P);let C=r.width,N=r.height;C>e&&(N=Math.round(N*e/C),C=e),y.width=C,y.height=N,Se.drawImage(r,0,0,C,N),y.toBlob(ge=>{s(ge||o)},"image/jpeg",d)},r.onerror=()=>{URL.revokeObjectURL(P),s(o)},r.src=P}),oe=async(o,e=!1)=>{if(!o)return null;R.value=!0;const d=(o.size/1024/1024).toFixed(1);M.value=`${d} MB`;let s=o,r=o.name.split(".").pop().toLowerCase(),y=o.type;if(o.type.startsWith("image/")&&!e){M.value=`Compression (${d} MB)...`,s=await Ne(o),r="jpg",y="image/jpeg";const C=(s.size/1024/1024).toFixed(1);M.value=`Upload (${C} MB)...`}e&&(!y||!y.startsWith("audio/"))&&(r="ogg",y="audio/ogg");const P=`uploads/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${r}`}`;try{const C=i.storage.from("images").upload(P,s,{contentType:y||void 0}),N=e?3e5:3e4,ge=e?"5 min":"30s",ft=new Promise((pn,bt)=>setTimeout(()=>bt(new Error(`Upload trop long (> ${ge}). Vérifie ta connexion.`)),N)),{error:Ae}=await Promise.race([C,ft]);if(R.value=!1,M.value="",Ae)return alert("Erreur upload: "+Ae.message),null;const{data:gt}=i.storage.from("images").getPublicUrl(P);return gt.publicUrl}catch(C){return R.value=!1,M.value="",alert(C.message||"Erreur upload"),null}},Te=async o=>{const e=o.target.files[0];if(!e)return;const d=await oe(e);d&&(x.value.image_url=d)},Fe=async o=>{const e=o.target.files[0];if(!e)return;const d=await oe(e);d&&(p.value.image_url=d)},Ie=async o=>{const e=o.target.files[0];if(!e)return;const d=await oe(e,!0);d&&(p.value.audio_url=d)},le=u([]),ne=u(!0),V=u(!1),F=u(null),x=u({titre:"",description:"",categorie:"Religieux",date:"",heure:"",lieu:"Mosquée des Bienfaisants",participants_max:null,image_url:"",video_url:""}),ae=async()=>{ne.value=!0;const{data:o}=await i.from("evenements").select("*").order("date",{ascending:!0});le.value=o||[],ne.value=!1},ye=(o=null)=>{F.value=o,o?x.value={...o}:x.value={titre:"",description:"",categorie:"Religieux",date:"",heure:"",lieu:"Mosquée des Bienfaisants",participants_max:null,image_url:"",video_url:""},V.value=!0},He=async()=>{q.value=!0;const o={...x.value};if(o.image_url||delete o.image_url,o.video_url||delete o.video_url,o.participants_max||delete o.participants_max,o.date||(o.date=null),o.heure||(o.heure=null),F.value){const{id:e,created_at:d,...s}=o;await i.from("evenements").update(s).eq("id",F.value.id)}else delete o.id,delete o.created_at,await i.from("evenements").insert(o);q.value=!1,V.value=!1,ae()},Ge=async o=>{confirm("Supprimer cet événement ?")&&(await i.from("evenements").delete().eq("id",o),ae())},re=u([]),ie=u(!0),D=u(!1),I=u(null),Oe=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],p=u({titre:"",description:"",enseignant:"",jour:"",heure:"",lieu:"Mosquée des Bienfaisants",categorie:"",image_url:"",video_url:"",audio_url:"",actif:!0}),de=async()=>{ie.value=!0;const{data:o}=await i.from("cours_religieux").select("*").order("created_at",{ascending:!1});re.value=o||[],ie.value=!1},he=(o=null)=>{I.value=o,o?p.value={...o}:p.value={titre:"",description:"",enseignant:"",jour:"",heure:"",lieu:"Mosquée des Bienfaisants",categorie:"",image_url:"",video_url:"",audio_url:"",actif:!0},D.value=!0},Je=async()=>{q.value=!0;const o={...p.value};o.image_url||delete o.image_url,o.video_url||delete o.video_url,o.audio_url||delete o.audio_url,o.jour||delete o.jour,o.categorie||delete o.categorie,o.heure||delete o.heure;try{let e;if(I.value){const{id:d,created_at:s,...r}=o;e=await i.from("cours_religieux").update(r).eq("id",I.value.id)}else delete o.id,delete o.created_at,e=await i.from("cours_religieux").insert(o);if(e.error){alert("Erreur: "+e.error.message),q.value=!1;return}q.value=!1,D.value=!1,de()}catch(e){alert("Erreur réseau: "+(e.message||"Vérifie ta connexion.")),q.value=!1}},Ye=async o=>{confirm("Supprimer ce cours ?")&&(await i.from("cours_religieux").delete().eq("id",o),de())},X=u([]),Q=u(!0),ue=T(()=>X.value.filter(o=>o.statut!=="accepté")),ce=T(()=>X.value.filter(o=>o.statut==="accepté")),K=async()=>{Q.value=!0;const{data:o}=await i.from("benevoles").select("*").order("created_at",{ascending:!1});X.value=o||[],Q.value=!1},_e=async(o,e)=>{await i.from("benevoles").update({statut:e}).eq("id",o),K()},we=async o=>{confirm("Supprimer cette candidature ?")&&(await i.from("benevoles").delete().eq("id",o),K())},me=u([]),ke=u([]),Z=u([]),Ce=u([]),k=u(null),H=u(""),$=u({nom:"",quantite:""}),je=[],We=new Date(2026,1,18);for(let o=0;o<30;o++){const e=new Date(We);e.setDate(e.getDate()+o),je.push(e)}const S=o=>{const e=o.getFullYear(),d=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0");return`${e}-${d}-${s}`},Xe=o=>o.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),Qe=T(()=>Z.value.filter(o=>!o.en_stock).length),G=u([]),qe=u([]),z=async()=>{const[o,e,d,s,r,y]=await Promise.all([i.from("ramadan_presences").select("*"),i.from("ramadan_taches").select("*"),i.from("ramadan_produits").select("*").order("created_at"),i.from("ramadan_notes").select("*").order("created_at"),i.from("equipes").select("*").order("created_at"),i.from("equipe_membres").select("*")]);me.value=o.data||[],ke.value=e.data||[],Z.value=d.data||[],Ce.value=s.data||[],G.value=r.data||[],qe.value=y.data||[]},Re=o=>{if(!o)return null;const e=G.value.find(d=>d.id===o);return e?e.nom:null},Ke=o=>qe.value.filter(e=>e.equipe_id===o),Ze=async o=>{confirm("Supprimer cette équipe ?")&&(await i.from("equipes").delete().eq("id",o),z())},pe=o=>me.value.filter(e=>e.jour===S(o)).length,ee=o=>me.value.filter(e=>e.jour===S(o)),ze=o=>ke.value.filter(e=>e.jour===S(o)),O=o=>{const e=X.value.find(d=>d.id===o);return e?`${e.prenom} ${e.nom}`:"Inconnu"},et=async()=>{!k.value||!H.value||(await i.from("ramadan_taches").insert({jour:S(k.value),nom:H.value}),H.value="",z())},tt=async(o,e)=>{if(e&&e.startsWith("eq_")){const d=e.replace("eq_","");await i.from("ramadan_taches").update({equipe_id:d,benevole_id:null}).eq("id",o)}else await i.from("ramadan_taches").update({benevole_id:e||null,equipe_id:null}).eq("id",o);z()},st=async o=>{await i.from("ramadan_taches").delete().eq("id",o),z()},Ue=o=>Ce.value.filter(e=>e.jour===S(o)),ot=async o=>{await i.from("ramadan_notes").delete().eq("id",o),z()},lt=async()=>{await i.from("ramadan_produits").insert({nom:$.value.nom,quantite:$.value.quantite||null}),$.value={nom:"",quantite:""},z()},nt=async o=>{await i.from("ramadan_produits").update({en_stock:!o.en_stock}).eq("id",o.id),z()},at=async o=>{confirm("Supprimer ce produit ?")&&(await i.from("ramadan_produits").delete().eq("id",o),z())},B=u([]),xe=u(!1),ve=T(()=>B.value.filter(o=>!o.lu).length),rt=async()=>{const{data:o}=await i.from("notifications").select("*").order("created_at",{ascending:!1}).limit(30);B.value=o||[]},it=async o=>{o.lu=!0,await i.from("notifications").update({lu:!0}).eq("id",o.id)},dt=async()=>{B.value.forEach(o=>o.lu=!0),await i.from("notifications").update({lu:!0}).eq("lu",!1)},ut=o=>{if(!o)return"";const e=new Date(o);return e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})+" à "+e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},E=u([]),fe=u(!1),J=u(""),ct=async()=>{fe.value=!0;try{const{data:o}=await i.from("benevoles").select("*").order("prenom");E.value=o||[]}catch{E.value=[]}fe.value=!1},Me=T(()=>{if(!J.value.trim())return E.value;const o=J.value.trim().toLowerCase();return E.value.filter(e=>e.prenom.toLowerCase().includes(o)||e.nom.toLowerCase().includes(o))}),mt=async(o,e)=>{o.role=e,await i.from("benevoles").update({role:e}).eq("id",o.id)},pt=async o=>{confirm("Supprimer ce bénévole définitivement ?")&&(await i.from("benevoles").delete().eq("id",o),E.value=E.value.filter(e=>e.id!==o),K())},xt=async o=>{const e=o.disponible===!1;o.disponible=e;const d={disponible:e};e&&(d.dispo_debut=null,d.dispo_fin=null,o.dispo_debut=null,o.dispo_fin=null),await i.from("benevoles").update(d).eq("id",o.id)},$e=async(o,e,d)=>{o[e]=d||null,await i.from("benevoles").update({[e]:d||null}).eq("id",o.id)},vt=async()=>{try{await i.auth.signOut()}catch(o){console.error("Erreur déconnexion:",o)}te.push("/admin")};return yt(async()=>{try{const{data:{session:o}}=await i.auth.getSession();if(!o){te.push("/admin");return}const e=o.user.email,{data:d,error:s}=await i.from("benevoles").select("*").eq("email",e).eq("statut","accepté");s&&console.error("Erreur chargement benevoles:",s);const r=(d||[]).find(y=>["admin","superadmin"].includes(y.role));if(r)Y.value=r;else{te.push("/");return}se.value=!1,ae(),de(),K(),rt()}catch(o){console.error("Erreur admin mount:",o),se.value=!1}}),(o,e)=>{const d=kt("router-link");return l(),n("div",Bt,[t("div",Et,[t("div",Pt,[t("div",Nt,[m(c(_t),{size:24,class:"text-emerald-400"}),e[39]||(e[39]=t("h1",{class:"text-lg sm:text-xl font-semibold"},"Administration",-1))]),t("div",Tt,[t("div",Ft,[t("button",{onClick:e[0]||(e[0]=s=>xe.value=!xe.value),class:"text-gray-400 hover:text-white transition-colors relative p-1"},[m(c(At),{size:18}),ve.value>0?(l(),n("span",It,a(ve.value>9?"9+":ve.value),1)):v("",!0)]),xe.value?(l(),n("div",Ht,[t("div",Gt,[e[40]||(e[40]=t("h4",{class:"font-semibold text-gray-800 text-sm"},"Notifications",-1)),B.value.length>0?(l(),n("button",{key:0,onClick:dt,class:"text-xs text-emerald-600 hover:underline"}," Tout marquer lu ")):v("",!0)]),t("div",Ot,[B.value.length===0?(l(),n("div",Jt," Aucune notification. ")):v("",!0),(l(!0),n(h,null,_(B.value,s=>{var r;return l(),n("div",{key:s.id,class:b(["px-4 py-3 border-b last:border-b-0 hover:bg-gray-50 transition-colors",s.lu?"":"bg-emerald-50/40"])},[t("div",Yt,[t("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",s.type==="disponibilite"?"bg-amber-100":"bg-blue-100"])},[(r=s.message)!=null&&r.includes("indisponible")?(l(),Ve(c(Ut),{key:0,size:14,class:"text-red-600"})):(l(),Ve(c(Mt),{key:1,size:14,class:"text-emerald-600"}))],2),t("div",Wt,[t("p",Xt,a(s.message),1),t("p",Qt,a(ut(s.created_at)),1)]),s.lu?v("",!0):(l(),n("button",{key:0,onClick:A(y=>it(s),["stop"]),class:"text-[10px] text-emerald-600 hover:underline flex-shrink-0 mt-1"}," Lu ",8,Kt))])],2)}),128))])])):v("",!0)]),m(d,{to:"/",class:"text-gray-400 hover:text-white transition-colors text-xs sm:text-sm"},{default:wt(()=>[...e[41]||(e[41]=[j(" Voir le site ",-1)])]),_:1}),t("button",{onClick:vt,class:"text-gray-400 hover:text-white transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm"},[m(c(Ct),{size:16}),e[42]||(e[42]=t("span",{class:"hidden sm:inline"},"Déconnexion",-1))])])])]),se.value?(l(),n("div",Zt,[...e[43]||(e[43]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):(l(),n("div",es,[t("div",ts,[t("div",ss,[t("button",{onClick:e[1]||(e[1]=s=>w.value="evenements"),class:b([w.value==="evenements"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"])},[m(c(jt),{size:18}),e[44]||(e[44]=j(" Événements ",-1))],2),t("button",{onClick:e[2]||(e[2]=s=>w.value="cours"),class:b([w.value==="cours"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"])},[m(c(De),{size:18}),e[45]||(e[45]=j(" Cours ",-1))],2),W.value?(l(),n("button",{key:0,onClick:e[3]||(e[3]=s=>w.value="benevoles"),class:b([w.value==="benevoles"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"])},[m(c(qt),{size:18}),e[46]||(e[46]=j(" Bénévoles ",-1))],2)):v("",!0),t("button",{onClick:e[4]||(e[4]=s=>{w.value="ramadan",z()}),class:b([w.value==="ramadan"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"])},[m(c(Vt),{size:18}),e[47]||(e[47]=j(" Ramadan ",-1))],2),W.value?(l(),n("button",{key:1,onClick:e[5]||(e[5]=s=>{w.value="gestion",ct()}),class:b([w.value==="gestion"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"])},[m(c(Lt),{size:18}),e[48]||(e[48]=j(" Gestion ",-1))],2)):v("",!0)])]),t("div",os,[w.value==="evenements"?(l(),n("div",ls,[t("div",ns,[e[50]||(e[50]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Gestion des Événements",-1)),t("button",{onClick:e[6]||(e[6]=s=>ye()),class:"bg-emerald-600 text-white px-4 sm:px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors flex items-center gap-2 text-sm sm:text-base"},[m(c(Be),{size:18}),e[49]||(e[49]=j(" Ajouter ",-1))])]),ne.value?(l(),n("div",as,[...e[51]||(e[51]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):le.value.length===0?(l(),n("div",rs,' Aucun événement. Cliquez sur "Ajouter" pour en créer un. ')):(l(),n("div",is,[(l(!0),n(h,null,_(le.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-4 sm:p-5 flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-5"},[t("img",{src:s.image_url||"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?q=80&w=200",class:"w-full sm:w-20 h-40 sm:h-20 rounded-lg object-cover flex-shrink-0"},null,8,ds),t("div",us,[t("h3",cs,a(s.titre),1),t("p",ms,a(s.description),1),t("div",ps,[t("span",null,a(s.date),1),t("span",null,a(s.heure),1),t("span",xs,a(s.categorie),1)])]),t("div",vs,[t("button",{onClick:r=>ye(s),class:"p-2 text-gray-400 hover:text-emerald-600 transition-colors"},[m(c(Ee),{size:18})],8,fs),t("button",{onClick:r=>Ge(s.id),class:"p-2 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:18})],8,gs)])]))),128))]))])):v("",!0),w.value==="cours"?(l(),n("div",bs,[t("div",ys,[e[53]||(e[53]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Gestion des Cours Religieux",-1)),t("button",{onClick:e[7]||(e[7]=s=>he()),class:"bg-emerald-600 text-white px-4 sm:px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors flex items-center gap-2 text-sm sm:text-base"},[m(c(Be),{size:18}),e[52]||(e[52]=j(" Ajouter ",-1))])]),ie.value?(l(),n("div",hs,[...e[54]||(e[54]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):re.value.length===0?(l(),n("div",_s,' Aucun cours. Cliquez sur "Ajouter" pour en créer un. ')):(l(),n("div",ws,[(l(!0),n(h,null,_(re.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-4 sm:p-5 flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-5"},[t("div",ks,[m(c(De),{size:28,class:"text-emerald-600"})]),t("div",Cs,[t("div",js,[t("h3",qs,a(s.titre),1),t("span",{class:b([s.actif?"bg-green-100 text-green-700":"bg-red-100 text-red-700","text-xs px-2 py-0.5 rounded"])},a(s.actif?"Actif":"Inactif"),3)]),t("p",Rs,a(s.description),1),t("div",zs,[s.jour?(l(),n("span",Us,a(s.jour),1)):v("",!0),s.heure?(l(),n("span",Ms,a(s.heure),1)):v("",!0),s.categorie?(l(),n("span",$s,a(s.categorie),1)):v("",!0)])]),t("div",Ss,[t("button",{onClick:r=>he(s),class:"p-2 text-gray-400 hover:text-emerald-600 transition-colors"},[m(c(Ee),{size:18})],8,As),t("button",{onClick:r=>Ye(s.id),class:"p-2 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:18})],8,Ls)])]))),128))]))])):v("",!0),w.value==="benevoles"?(l(),n("div",Vs,[t("div",Ds,[t("div",Bs,[t("div",Es,[e[55]||(e[55]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Demandes",-1)),t("span",Ps,a(ue.value.length)+" demande(s)",1)]),Q.value?(l(),n("div",Ns,[...e[56]||(e[56]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):ue.value.length===0?(l(),n("div",Ts," Aucune demande pour le moment. ")):(l(),n("div",Fs,[(l(!0),n(h,null,_(ue.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-4 sm:p-5"},[t("div",Is,[t("div",Hs,[t("div",Gs,[t("h3",Os,a(s.prenom)+" "+a(s.nom),1),t("span",{class:b([{"bg-blue-100 text-blue-700":s.statut==="nouveau","bg-yellow-100 text-yellow-700":s.statut==="contacté","bg-red-100 text-red-700":s.statut==="refusé"},"text-xs px-2 py-0.5 rounded font-medium"])},a(s.statut),3)]),t("div",Js,[t("p",null,[e[57]||(e[57]=t("strong",null,"Email :",-1)),e[58]||(e[58]=j()),t("a",{href:"mailto:"+s.email,class:"text-emerald-600 hover:underline"},a(s.email),9,Ys)]),t("p",null,[e[59]||(e[59]=t("strong",null,"Téléphone :",-1)),e[60]||(e[60]=j()),t("a",{href:"tel:"+s.telephone,class:"text-emerald-600 hover:underline"},a(s.telephone),9,Ws)]),t("p",null,[e[61]||(e[61]=t("strong",null,"Domaine :",-1)),e[62]||(e[62]=j()),t("span",Xs,a(s.domaine),1)]),s.message?(l(),n("p",Qs,'"'+a(s.message)+'"',1)):v("",!0),t("p",Ks,"Reçu le "+a(new Date(s.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})),1)])]),t("div",Zs,[t("select",{value:s.statut,onChange:r=>_e(s.id,r.target.value),class:"text-xs border rounded-lg px-3 py-1.5 focus:outline-none focus:border-emerald-600"},[...e[63]||(e[63]=[t("option",{value:"nouveau"},"Nouveau",-1),t("option",{value:"contacté"},"Contacté",-1),t("option",{value:"accepté"},"Accepté",-1),t("option",{value:"refusé"},"Refusé",-1)])],40,eo),t("button",{onClick:r=>we(s.id),class:"p-2 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:18})],8,to)])])]))),128))]))]),t("div",null,[t("div",so,[e[64]||(e[64]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Nos bénévoles",-1)),t("span",oo,a(ce.value.length),1)]),Q.value?(l(),n("div",lo,[...e[65]||(e[65]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):ce.value.length===0?(l(),n("div",no," Aucun bénévole accepté pour le moment. ")):(l(),n("div",ao,[(l(!0),n(h,null,_(ce.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-4 flex items-center gap-3"},[t("div",ro,[m(c($t),{size:18,class:"text-emerald-600"})]),t("div",io,[t("h3",uo,a(s.prenom)+" "+a(s.nom),1),t("p",co,a(s.domaine),1),t("p",mo,a(s.email),1)]),t("div",po,[t("select",{value:s.statut,onChange:r=>_e(s.id,r.target.value),class:"text-xs border rounded-lg px-2 py-1 focus:outline-none focus:border-emerald-600"},[...e[66]||(e[66]=[t("option",{value:"nouveau"},"Nouveau",-1),t("option",{value:"contacté"},"Contacté",-1),t("option",{value:"accepté"},"Accepté",-1),t("option",{value:"refusé"},"Refusé",-1)])],40,xo),t("button",{onClick:r=>we(s.id),class:"p-1.5 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:16})],8,vo)])]))),128))]))])])])):v("",!0),w.value==="ramadan"?(l(),n("div",fo,[t("div",go,[t("div",bo,[e[72]||(e[72]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2"},"Planning Ramadan 2026",-1)),e[73]||(e[73]=t("p",{class:"text-sm text-gray-500 mb-6"},"18 février - 19 mars | Cliquez sur un jour pour voir les détails",-1)),t("div",yo,[(l(),n(h,null,_(je,(s,r)=>t("button",{key:r,onClick:y=>k.value=s,class:b([[k.value&&S(k.value)===S(s)?"ring-2 ring-emerald-600 shadow-md":"",pe(s)===0?"bg-red-50 text-red-700 border-red-200":pe(s)<3?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-emerald-50 text-emerald-700 border-emerald-200"],"rounded-xl p-2 text-center transition-all hover:shadow border"])},[t("span",_o,"J"+a(r+1),1),t("span",wo,a(s.getDate()),1),t("span",ko,a(pe(s))+" ben.",1)],10,ho)),64))]),k.value?(l(),n("div",Co,[t("h3",jo,a(Xe(k.value)),1),t("div",qo,[t("h4",Ro," Bénévoles présents ("+a(ee(k.value).length)+") ",1),ee(k.value).length===0?(l(),n("div",zo," Aucun bénévole inscrit pour ce jour. ")):(l(),n("div",Uo,[(l(!0),n(h,null,_(ee(k.value),s=>(l(),n("span",{key:s.id,class:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg font-medium"},a(O(s.benevole_id)),1))),128))]))]),t("div",Mo,[e[70]||(e[70]=t("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Tâches",-1)),ze(k.value).length===0?(l(),n("div",$o," Aucune tâche pour ce jour. ")):(l(),n("div",So,[(l(!0),n(h,null,_(ze(k.value),s=>(l(),n("div",{key:s.id,class:"flex items-center gap-2 bg-gray-50 rounded-lg p-2"},[t("span",{class:b([s.fait?"bg-emerald-100 text-emerald-600":"bg-gray-200 text-gray-400","w-6 h-6 rounded flex items-center justify-center flex-shrink-0 text-xs font-bold"])},a(s.fait?"✓":""),3),t("span",{class:b(["text-sm flex-1 font-medium",s.fait?"line-through text-gray-400":"text-gray-700"])},a(s.nom),3),Re(s.equipe_id)?(l(),n("span",Ao,a(Re(s.equipe_id)),1)):v("",!0),O(s.benevole_id)!=="Inconnu"?(l(),n("span",Lo,a(O(s.benevole_id)),1)):v("",!0),t("select",{value:s.benevole_id||(s.equipe_id?"eq_"+s.equipe_id:""),onChange:r=>tt(s.id,r.target.value),class:"text-xs border rounded-lg px-2 py-1 focus:outline-none focus:border-emerald-600 max-w-[160px]"},[e[67]||(e[67]=t("option",{value:""},"Non assignée",-1)),(l(!0),n(h,null,_(ee(k.value),r=>(l(),n("option",{key:r.benevole_id,value:r.benevole_id},a(O(r.benevole_id)),9,Do))),128)),e[68]||(e[68]=t("option",{disabled:"",class:"font-medium"},"── Équipes ──",-1)),(l(!0),n(h,null,_(G.value,r=>(l(),n("option",{key:r.id,value:"eq_"+r.id},a(r.nom),9,Bo))),128))],40,Vo),t("button",{onClick:r=>st(s.id),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:14})],8,Eo)]))),128))])),t("form",{onSubmit:A(et,["prevent"]),class:"flex gap-2"},[f(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>H.value=s),required:"",placeholder:"Nouvelle tâche (ex: Cuisson riz, Service...)",class:"flex-1 px-3 py-2 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,H.value]]),e[69]||(e[69]=t("button",{type:"submit",class:"bg-emerald-600 text-white px-4 py-2 rounded-xl hover:bg-emerald-700 text-sm font-medium"}," Ajouter ",-1))],32)]),t("div",null,[e[71]||(e[71]=t("h4",{class:"text-sm font-medium text-gray-600 mb-3"},"Notes partagées",-1)),Ue(k.value).length===0?(l(),n("div",Po," Aucune note pour ce jour. ")):(l(),n("div",No,[(l(!0),n(h,null,_(Ue(k.value),s=>(l(),n("div",{key:s.id,class:"flex items-start gap-2 bg-yellow-50/50 rounded-lg px-3 py-2"},[t("div",To,[t("p",Fo,a(s.contenu),1),t("p",Io,a(s.auteur_nom),1)]),t("button",{onClick:r=>ot(s.id),class:"p-1 text-gray-400 hover:text-red-600 transition-colors flex-shrink-0"},[m(c(U),{size:14})],8,Ho)]))),128))]))])])):(l(),n("div",Go," Sélectionnez un jour pour voir les détails et gérer les tâches. "))]),t("div",null,[t("div",Oo,[e[74]||(e[74]=t("h2",{class:"text-xl font-semibold text-gray-800"},"Courses",-1)),t("span",Jo,a(Qe.value)+" manquant(s) ",1)]),t("form",{onSubmit:A(lt,["prevent"]),class:"bg-white rounded-xl border p-3 mb-4"},[t("div",Yo,[f(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>$.value.nom=s),required:"",placeholder:"Produit",class:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,$.value.nom]]),f(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>$.value.quantite=s),placeholder:"Qté",class:"w-20 px-3 py-2 border rounded-lg focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,$.value.quantite]]),e[75]||(e[75]=t("button",{type:"submit",class:"bg-emerald-600 text-white px-3 py-2 rounded-lg text-sm font-bold"},"+",-1))])],32),Z.value.length===0?(l(),n("div",Wo," Aucun produit ajouté. ")):(l(),n("div",Xo,[(l(!0),n(h,null,_(Z.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-3 flex items-center gap-2"},[t("button",{onClick:r=>nt(s),class:b([s.en_stock?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600","w-7 h-7 rounded-lg flex items-center justify-center text-xs font-bold flex-shrink-0 transition-colors"])},a(s.en_stock?"✓":"✗"),11,Qo),t("div",Ko,[t("p",{class:b(["text-sm font-medium",s.en_stock?"line-through text-gray-400":"text-gray-800"])},a(s.nom),3),t("p",Zo,a(s.quantite||"")+" "+a(s.responsable_nom?"· "+s.responsable_nom:""),1)]),t("button",{onClick:r=>at(s.id),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:14})],8,el)]))),128)),t("div",tl,[e[76]||(e[76]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"Équipes",-1)),G.value.length===0?(l(),n("div",sl," Aucune équipe créée. ")):(l(),n("div",ol,[(l(!0),n(h,null,_(G.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-3"},[t("div",ll,[t("div",nl,[t("div",al,a(s.nom.substring(0,2).toUpperCase()),1),t("p",rl,a(s.nom),1)]),W.value?(l(),n("button",{key:0,onClick:r=>Ze(s.id),class:"p-1 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:14})],8,il)):v("",!0)]),t("div",dl,[(l(!0),n(h,null,_(Ke(s.id),r=>(l(),n("span",{key:r.id,class:"text-[11px] bg-violet-50 text-violet-700 px-2 py-0.5 rounded font-medium"},a(O(r.benevole_id)),1))),128))])]))),128))]))])]))])])])):v("",!0)]),w.value==="gestion"&&W.value?(l(),n("div",ul,[e[81]||(e[81]=t("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2"},"Gestion des bénévoles",-1)),e[82]||(e[82]=t("p",{class:"text-sm text-gray-500 mb-6"},"Gérez les rôles, la disponibilité et supprimez des bénévoles.",-1)),t("div",cl,[m(c(St),{size:18,class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),f(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>J.value=s),type:"text",placeholder:"Rechercher par nom ou prénom...",class:"w-full pl-11 pr-4 py-3 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,J.value]])]),fe.value?(l(),n("div",ml,[...e[77]||(e[77]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):Me.value.length===0?(l(),n("div",pl,a(J.value?"Aucun résultat pour cette recherche.":"Aucun bénévole trouvé."),1)):(l(),n("div",xl,[(l(!0),n(h,null,_(Me.value,s=>(l(),n("div",{key:s.id,class:"bg-white rounded-xl border p-4 space-y-3"},[t("div",vl,[t("div",fl,[t("div",{class:b(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",s.role==="superadmin"?"bg-amber-100 text-amber-700":s.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"])},a(s.prenom[0])+a(s.nom[0]),3),t("div",gl,[t("p",bl,a(s.prenom)+" "+a(s.nom),1),t("p",yl,a(s.email),1)])]),t("div",hl,[t("span",{class:b([{"bg-amber-100 text-amber-700":s.role==="superadmin","bg-purple-100 text-purple-700":s.role==="admin","bg-gray-100 text-gray-500":!s.role||s.role==="benevole"},"text-xs px-2.5 py-1 rounded-lg font-medium"])},a(s.role==="superadmin"?"Super Admin":s.role==="admin"?"Admin":"Bénévole"),3),s.id!==Y.value.id?(l(),n("select",{key:0,value:s.role||"benevole",onChange:r=>mt(s,r.target.value),class:"text-xs border rounded-lg px-3 py-1.5 focus:outline-none focus:border-emerald-600"},[...e[78]||(e[78]=[t("option",{value:"benevole"},"Bénévole",-1),t("option",{value:"admin"},"Admin",-1)])],40,_l)):(l(),n("span",wl,"C'est vous")),s.id!==Y.value.id?(l(),n("button",{key:2,onClick:r=>pt(s.id),class:"p-1.5 text-gray-400 hover:text-red-600 transition-colors"},[m(c(U),{size:16})],8,kl)):v("",!0)])]),t("div",Cl,[t("label",jl,[t("input",{type:"checkbox",checked:s.disponible!==!1,onChange:r=>xt(s),class:"w-4 h-4 accent-emerald-600"},null,40,ql),t("span",{class:b(s.disponible!==!1?"text-emerald-600 font-medium":"text-red-500 font-medium")},a(s.disponible!==!1?"Disponible":"Indisponible"),3)]),s.disponible===!1?(l(),n("div",Rl,[e[79]||(e[79]=t("span",{class:"text-xs text-gray-500"},"Du",-1)),t("input",{type:"date",value:s.dispo_debut||"",onChange:r=>$e(s,"dispo_debut",r.target.value),class:"text-xs border rounded-lg px-2 py-1 focus:outline-none focus:border-emerald-600"},null,40,zl),e[80]||(e[80]=t("span",{class:"text-xs text-gray-500"},"au",-1)),t("input",{type:"date",value:s.dispo_fin||"",onChange:r=>$e(s,"dispo_fin",r.target.value),class:"text-xs border rounded-lg px-2 py-1 focus:outline-none focus:border-emerald-600"},null,40,Ul)])):v("",!0)])]))),128))]))])):v("",!0)])),V.value?(l(),n("div",{key:2,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:e[24]||(e[24]=A(s=>V.value=!1,["self"]))},[t("div",Ml,[t("div",$l,[t("h3",Sl,a(F.value?"Modifier":"Ajouter")+" un événement",1),t("button",{onClick:e[12]||(e[12]=s=>V.value=!1),class:"text-gray-400 hover:text-gray-600"},[m(c(Le),{size:24})])]),t("form",{onSubmit:A(He,["prevent"]),class:"p-6 space-y-5"},[t("div",null,[e[83]||(e[83]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Titre *",-1)),f(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>x.value.titre=s),required:"",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.titre]])]),t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=s=>x.value.description=s),rows:"3",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.description]])]),t("div",Al,[t("div",null,[e[86]||(e[86]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),f(t("select",{"onUpdate:modelValue":e[15]||(e[15]=s=>x.value.categorie=s),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},[...e[85]||(e[85]=[t("option",{value:"Religieux"},"Religieux",-1),t("option",{value:"Éducation"},"Éducation",-1),t("option",{value:"Social"},"Social",-1),t("option",{value:"Culturel"},"Culturel",-1)])],512),[[be,x.value.categorie]])]),t("div",null,[e[87]||(e[87]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lieu *",-1)),f(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>x.value.lieu=s),required:"",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.lieu]])])]),t("div",Ll,[t("div",null,[e[88]||(e[88]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date *",-1)),f(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>x.value.date=s),type:"date",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.date]])]),t("div",null,[e[89]||(e[89]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Heure *",-1)),f(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>x.value.heure=s),type:"time",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.heure]])])]),t("div",Vl,[t("div",null,[e[90]||(e[90]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Participants max",-1)),f(t("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>x.value.participants_max=s),type:"number",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.participants_max,void 0,{number:!0}]])])]),t("div",null,[e[92]||(e[92]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),t("div",Dl,[t("label",Bl,[t("div",El,[m(c(Pe),{size:18,class:"text-gray-400"}),t("span",Pl,a(R.value?M.value||"Upload...":"Choisir un fichier"),1)]),t("input",{type:"file",accept:"image/*",class:"hidden",onChange:Te,disabled:R.value},null,40,Nl)]),e[91]||(e[91]=t("span",{class:"hidden sm:flex items-center text-xs text-gray-400"},"ou",-1)),f(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>x.value.image_url=s),type:"text",placeholder:"Coller une URL...",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,x.value.image_url]])])]),t("div",null,[e[93]||(e[93]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"URL vidéo YouTube",-1)),f(t("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>x.value.video_url=s),type:"url",placeholder:"https://youtube.com/watch?v=...",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,x.value.video_url]])]),x.value.image_url?(l(),n("div",Tl,[t("img",{src:x.value.image_url,class:"w-full h-48 object-cover",onError:e[22]||(e[22]=s=>x.value.image_url="")},null,40,Fl)])):v("",!0),t("div",Il,[t("button",{type:"button",onClick:e[23]||(e[23]=s=>V.value=!1),class:"px-5 py-2.5 border rounded-xl hover:bg-gray-50 transition-colors"}," Annuler "),t("button",{type:"submit",disabled:q.value,class:"px-5 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50"},a(q.value?"Enregistrement...":F.value?"Modifier":"Ajouter"),9,Hl)])],32)])])):v("",!0),D.value?(l(),n("div",{key:3,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:e[38]||(e[38]=A(s=>D.value=!1,["self"]))},[t("div",Gl,[t("div",Ol,[t("h3",Jl,a(I.value?"Modifier":"Ajouter")+" un cours",1),t("button",{onClick:e[25]||(e[25]=s=>D.value=!1),class:"text-gray-400 hover:text-gray-600"},[m(c(Le),{size:24})])]),t("form",{onSubmit:A(Je,["prevent"]),class:"p-6 space-y-5"},[t("div",null,[e[94]||(e[94]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Titre *",-1)),f(t("input",{"onUpdate:modelValue":e[26]||(e[26]=s=>p.value.titre=s),required:"",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.titre]])]),t("div",null,[e[95]||(e[95]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),f(t("textarea",{"onUpdate:modelValue":e[27]||(e[27]=s=>p.value.description=s),rows:"3",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.description]])]),t("div",Yl,[t("div",null,[e[96]||(e[96]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Enseignant",-1)),f(t("input",{"onUpdate:modelValue":e[28]||(e[28]=s=>p.value.enseignant=s),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.enseignant]])]),t("div",null,[e[97]||(e[97]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Lieu",-1)),f(t("input",{"onUpdate:modelValue":e[29]||(e[29]=s=>p.value.lieu=s),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.lieu]])])]),t("div",Wl,[t("div",null,[e[99]||(e[99]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Jour",-1)),f(t("select",{"onUpdate:modelValue":e[30]||(e[30]=s=>p.value.jour=s),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},[e[98]||(e[98]=t("option",{value:""},"--",-1)),(l(),n(h,null,_(Oe,s=>t("option",{key:s,value:s},a(s),9,Xl)),64))],512),[[be,p.value.jour]])]),t("div",null,[e[100]||(e[100]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Heure",-1)),f(t("input",{"onUpdate:modelValue":e[31]||(e[31]=s=>p.value.heure=s),type:"time",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.heure]])]),t("div",null,[e[102]||(e[102]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),f(t("select",{"onUpdate:modelValue":e[32]||(e[32]=s=>p.value.categorie=s),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},[...e[101]||(e[101]=[Rt('<option value="">--</option><option value="Tajwid">Tajwid</option><option value="Croyance">Croyance</option><option value="Jurisprudence">Jurisprudence</option><option value="Langue arabe">Langue arabe</option><option value="Coran">Coran</option><option value="Hadith">Hadith</option><option value="Sira">Sira</option><option value="Éducation islamique">Éducation islamique</option>',9)])],512),[[be,p.value.categorie]])])]),t("div",null,[e[104]||(e[104]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),t("div",Ql,[t("label",Kl,[t("div",Zl,[m(c(Pe),{size:18,class:"text-gray-400"}),t("span",en,a(R.value?M.value||"Upload...":"Choisir un fichier"),1)]),t("input",{type:"file",accept:"image/*",class:"hidden",onChange:Fe,disabled:R.value},null,40,tn)]),e[103]||(e[103]=t("span",{class:"hidden sm:flex items-center text-xs text-gray-400"},"ou",-1)),f(t("input",{"onUpdate:modelValue":e[33]||(e[33]=s=>p.value.image_url=s),type:"text",placeholder:"Coller une URL...",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,p.value.image_url]])])]),t("div",null,[e[105]||(e[105]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"URL vidéo YouTube",-1)),f(t("input",{"onUpdate:modelValue":e[34]||(e[34]=s=>p.value.video_url=s),type:"url",placeholder:"https://youtube.com/watch?v=...",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600"},null,512),[[g,p.value.video_url]])]),t("div",null,[e[107]||(e[107]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Audio (cours audio, récitation, etc.)",-1)),t("div",sn,[t("label",on,[t("div",ln,[m(c(Dt),{size:18,class:"text-gray-400"}),t("span",nn,a(R.value?M.value||"Upload...":"Choisir un audio"),1)]),t("input",{type:"file",accept:"audio/*,image/*,.opus,.ogg,.m4a,.amr,.wav,.mp3,.aac,.wma",class:"hidden",onChange:Ie,disabled:R.value},null,40,an)]),e[106]||(e[106]=t("span",{class:"hidden sm:flex items-center text-xs text-gray-400"},"ou",-1)),f(t("input",{"onUpdate:modelValue":e[35]||(e[35]=s=>p.value.audio_url=s),type:"text",placeholder:"Coller une URL audio...",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[g,p.value.audio_url]])]),p.value.audio_url?(l(),n("audio",{key:0,src:p.value.audio_url,controls:"",class:"w-full mt-2 rounded-lg"},null,8,rn)):v("",!0)]),t("div",dn,[f(t("input",{"onUpdate:modelValue":e[36]||(e[36]=s=>p.value.actif=s),type:"checkbox",id:"actif",class:"w-4 h-4 accent-emerald-600"},null,512),[[zt,p.value.actif]]),e[108]||(e[108]=t("label",{for:"actif",class:"text-sm font-medium text-gray-700"},"Cours actif (visible sur le site)",-1))]),t("div",un,[t("button",{type:"button",onClick:e[37]||(e[37]=s=>D.value=!1),class:"px-5 py-2.5 border rounded-xl hover:bg-gray-50 transition-colors"}," Annuler "),t("button",{type:"submit",disabled:q.value,class:"px-5 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50"},a(q.value?"Enregistrement...":I.value?"Modifier":"Ajouter"),9,cn)])],32)])])):v("",!0)])}}};export{bn as default};
