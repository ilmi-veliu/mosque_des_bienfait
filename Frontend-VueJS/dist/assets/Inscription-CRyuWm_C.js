import{r as n,b as x,d,e as s,f as p,u as c,U as _,m as S,k as z,t as f,A as U,i as v,v as g,n as j,B as q,D as k,g as b,w as V,h as N,E as B,z as C}from"./index-CIg7Y9mF.js";import{E as M}from"./eye-off-BFokEiN3.js";import{E as P}from"./eye-Be8F1rml.js";import{C as A}from"./chevron-left-DNiIm_Ka.js";const D={class:"min-h-screen bg-gray-50 py-16 px-4"},R={class:"max-w-5xl mx-auto"},I={class:"text-center mb-12"},Z={class:"flex justify-center mb-4"},L={class:"flex flex-col md:flex-row gap-12"},T={class:"md:w-1/2"},$={class:"bg-white rounded-2xl shadow-sm border p-8"},F={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm mb-6"},O={class:"grid grid-cols-2 gap-4"},W={key:0,class:"text-xs text-red-500 mt-1"},G={class:"relative"},H=["type"],J=["disabled"],K={class:"mt-6 text-center space-y-3"},Q={class:"text-sm text-gray-500"},oe={__name:"Inscription",setup(X){const y=B(),a=n(!1),l=n(""),i=n(""),m=n(!1),t=n({prenom:"",nom:"",email:"",password:""}),w=()=>{const r=t.value.email.trim();if(i.value="",!r)return;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)||(i.value="Veuillez entrer une adresse email valide (ex: nom@exemple.com)")},E=async()=>{var o,h;if(a.value=!0,l.value="",w(),i.value){a.value=!1;return}const{data:r,error:e}=await C.auth.signUp({email:t.value.email,password:t.value.password,options:{data:{prenom:t.value.prenom,nom:t.value.nom}}});if(e){e.message==="User already registered"?l.value="Cette adresse email est déjà utilisée. Connectez-vous plutôt.":e.message.includes("password")?l.value="Le mot de passe doit contenir au moins 6 caractères.":l.value=e.message,a.value=!1;return}if(((h=(o=r==null?void 0:r.user)==null?void 0:o.identities)==null?void 0:h.length)===0){l.value="Cette adresse email est déjà utilisée. Connectez-vous plutôt.",a.value=!1;return}if(r!=null&&r.session){y.push("/");return}const{error:u}=await C.auth.signInWithPassword({email:t.value.email,password:t.value.password});u?(l.value="Inscription réussie ! Vérifiez votre email pour confirmer votre compte.",t.value={prenom:"",nom:"",email:"",password:""},a.value=!1):y.push("/")};return(r,e)=>{const u=N("router-link");return d(),x("div",D,[s("div",R,[s("div",I,[s("div",Z,[p(c(_),{size:48,class:"text-emerald-700"})]),e[5]||(e[5]=s("h1",{class:"text-3xl font-semibold text-gray-900 mb-3"},"S'inscrire",-1)),e[6]||(e[6]=s("p",{class:"text-gray-500 max-w-xl mx-auto"}," Rejoignez notre communauté pour recevoir des informations sur nos événements, cours et activités spirituelles. ",-1))]),s("div",L,[e[16]||(e[16]=S('<div class="md:w-1/2"><h2 class="text-xl font-semibold text-gray-900 mb-6">Pourquoi s&#39;inscrire ?</h2><div class="space-y-6"><div><h3 class="font-semibold text-gray-800 flex items-center gap-2"><div class="w-2 h-2 bg-emerald-600 rounded-full"></div> Événements et activités </h3><p class="text-sm text-gray-500 ml-4 mt-1"> Recevez les notifications pour nos événements spéciaux, conférences et activités communautaires. </p></div><div><h3 class="font-semibold text-gray-800 flex items-center gap-2"><div class="w-2 h-2 bg-emerald-600 rounded-full"></div> Cours et formation </h3><p class="text-sm text-gray-500 ml-4 mt-1"> Soyez informé des cours d&#39;arabe, d&#39;étude du Coran et des programmes éducatifs. </p></div><div><h3 class="font-semibold text-gray-800 flex items-center gap-2"><div class="w-2 h-2 bg-emerald-600 rounded-full"></div> Services communautaires </h3><p class="text-sm text-gray-500 ml-4 mt-1"> Accédez à nos services d&#39;aide, de conseil et d&#39;accompagnement pour notre communauté. </p></div></div><div class="mt-8 bg-emerald-50 rounded-xl p-5 border-l-4 border-emerald-600"><h3 class="font-semibold text-gray-800 mb-2">Protection des données</h3><p class="text-xs text-gray-500 leading-relaxed"> Vos informations personnelles sont protégées et utilisées uniquement pour la communication de la mosquée. Nous ne partageons jamais vos données avec des tiers et respectons votre vie privée. </p></div></div>',1)),s("div",T,[s("div",$,[e[14]||(e[14]=s("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Formulaire d'inscription",-1)),e[15]||(e[15]=s("p",{class:"text-sm text-gray-500 mb-6"},"Remplissez vos informations pour rejoindre notre communauté.",-1)),l.value?(d(),x("div",F,f(l.value),1)):z("",!0),s("form",{onSubmit:U(E,["prevent"]),class:"space-y-5"},[s("div",O,[s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prénom *",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.prenom=o),required:"",placeholder:"Votre prénom",class:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[g,t.value.prenom]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom *",-1)),v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.nom=o),required:"",placeholder:"Votre nom de famille",class:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[g,t.value.nom]])])]),s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.email=o),type:"email",required:"",placeholder:"votre.email@exemple.com",class:j(["w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors",i.value?"border-red-400":""]),onBlur:w},null,34),[[g,t.value.email]]),i.value?(d(),x("p",W,f(i.value),1)):z("",!0)]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mot de passe *",-1)),s("div",G,[v(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.password=o),type:m.value?"text":"password",required:"",minlength:"6",placeholder:"Minimum 6 caractères",class:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors pr-12"},null,8,H),[[q,t.value.password]]),s("button",{type:"button",onClick:e[4]||(e[4]=o=>m.value=!m.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors"},[m.value?(d(),k(c(M),{key:0,size:18})):(d(),k(c(P),{key:1,size:18}))])])]),s("button",{type:"submit",disabled:a.value,class:"w-full bg-gradient-to-r from-emerald-600 to-teal-700 text-white py-3 rounded-xl font-semibold hover:from-emerald-700 hover:to-teal-800 transition-all disabled:opacity-50"},f(a.value?"Inscription...":"S'inscrire maintenant"),9,J)],32),s("div",K,[s("p",Q,[e[12]||(e[12]=b(" Déjà inscrit ? ",-1)),p(u,{to:"/connexion",class:"text-emerald-700 font-medium hover:underline"},{default:V(()=>[...e[11]||(e[11]=[b("Se connecter",-1)])]),_:1})]),p(u,{to:"/",class:"text-sm text-gray-400 hover:text-gray-600 inline-flex items-center gap-1"},{default:V(()=>[p(c(A),{size:14}),e[13]||(e[13]=b(" Retour à l'accueil ",-1))]),_:1})])])])])])])}}};export{oe as default};
