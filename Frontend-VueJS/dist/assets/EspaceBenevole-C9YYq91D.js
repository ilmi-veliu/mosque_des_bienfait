import{c as xe,r as b,a as N,o as pt,z as m,J as bt,b as l,d as n,k as u,e as s,f as c,w as B,g as x,u as v,h as ft,t as i,n as p,L as gt,D as _e,A as L,X as J,i as w,v as D,F as g,l as _,C as Ve,m as yt,x as _t,E as ht,K as kt,H as wt,I as Ct}from"./index-DVXJlr8e.js";import{C as he}from"./chevron-left-Bglzm4Hp.js";import{U as Re,a as Te,C as Ae,P as ce}from"./user-check-CDBH7yj1.js";import{C as jt}from"./clock-CQLoKpcx.js";import{E as Pe}from"./eye-BJOvXvfb.js";import{U as qt}from"./users-D0IqPn4X.js";import{B as Dt}from"./book-open-FsBSsuiQ.js";import{W as zt,M as $t,U as Mt}from"./wrench-DVG7GzvH.js";/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=xe("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=xe("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=xe("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=xe("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),At={class:"min-h-screen bg-gray-50"},Pt={key:0,class:"min-h-screen flex items-center justify-center"},Et={key:1,class:"min-h-screen flex items-center justify-center px-4"},Nt={class:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md text-center"},Ut={class:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4"},Ft={class:"space-y-3"},It={class:"mt-6 pt-6 border-t"},Bt={class:"text-xs text-gray-400"},Lt={key:2,class:"min-h-screen flex items-center justify-center px-4"},Jt={class:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md text-center"},Ot={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},Ht={class:"text-gray-500 text-sm mb-6"},Wt={class:"space-y-3"},Yt={key:3},Xt={class:"bg-[#030213] text-white px-4 py-4"},Kt={class:"max-w-7xl mx-auto flex justify-between items-center"},Qt={class:"flex items-center gap-3"},Gt={class:"text-lg font-semibold"},Zt={class:"text-xs text-gray-400"},es={class:"flex items-center gap-3 sm:gap-4"},ts={class:"max-w-7xl mx-auto px-4 pt-6"},ss={class:"flex flex-col sm:flex-row sm:items-center gap-4"},os={class:"flex items-center gap-3 flex-1"},ns={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md"},ls={class:"border-b px-6 py-4 flex items-center justify-between"},as={class:"px-6 py-5 space-y-5"},is={class:"flex gap-3"},rs={class:"space-y-3"},ds={class:"text-xs text-gray-500"},us={class:"grid grid-cols-2 gap-3"},ms=["placeholder"],cs=["disabled"],xs={key:1,class:"max-w-7xl mx-auto px-4 py-8"},vs={class:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 flex items-center gap-3"},ps={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-16"},bs={class:"w-12 h-12 bg-emerald-50 rounded-lg flex items-center justify-center mb-4"},fs={class:"font-semibold text-gray-800 mb-2"},gs={class:"text-sm text-gray-600"},ys={key:2,class:"bg-white border-b"},_s={class:"max-w-7xl mx-auto flex"},hs={key:3,class:"max-w-7xl mx-auto px-4 py-8"},ks={key:0},ws={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-6"},Cs={class:"text-sm bg-emerald-100 text-emerald-700 px-3 py-1.5 rounded-full font-medium self-start"},js={key:0,class:"text-center py-12"},qs={key:1},Ds={class:"flex items-center justify-between mb-4"},zs={class:"text-sm font-medium text-gray-600"},$s={class:"bg-white rounded-2xl border overflow-hidden"},Ms={class:"grid grid-cols-7 bg-gray-50 border-b"},Ss={class:"grid grid-cols-7"},Vs=["onClick"],Rs={class:"flex items-start justify-between"},Ts={key:0,class:"text-[10px] text-emerald-600 font-bold"},As={class:"mt-1 flex flex-wrap gap-1"},Ps={key:0,class:"w-2 h-2 rounded-full bg-emerald-500 inline-block"},Es={key:1,class:"text-[10px] text-gray-400"},Ns={key:0,class:"mt-0.5"},Us={class:"text-[10px] bg-amber-100 text-amber-700 px-1 rounded"},Fs={key:1,class:"mt-0.5 hidden sm:block"},Is={class:"text-[10px] bg-blue-100 text-blue-700 px-1 rounded"},Bs={key:2,class:"mt-0.5 hidden sm:block"},Ls={class:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded"},Js={key:1},Os={class:"flex gap-2 mb-6 overflow-x-auto"},Hs={key:0,class:"text-center py-12"},Ws={key:0},Ys={class:"flex justify-between items-center mb-6"},Xs={class:"text-sm text-gray-500"},Ks={key:0,class:"bg-white rounded-xl border p-4 mb-6"},Qs={class:"flex flex-col sm:flex-row gap-3"},Gs={class:"flex flex-col sm:flex-row gap-3 items-end"},Zs={class:"flex-1"},eo=["value"],to={key:1,class:"text-center py-12 text-gray-500"},so={key:2,class:"space-y-3"},oo={class:"flex items-center gap-3 flex-1 min-w-0"},no=["onClick"],lo={class:"min-w-0"},ao={class:"text-xs text-gray-400"},io={class:"flex items-center gap-2 self-end sm:self-center flex-wrap"},ro={key:0,class:"text-xs bg-violet-50 text-violet-700 px-2 py-1 rounded font-medium"},uo={key:1,class:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-medium"},mo=["onClick"],co=["onClick"],xo=["onClick"],vo={key:1},po={class:"flex justify-between items-center mb-6"},bo={class:"text-sm text-gray-500"},fo={key:0,class:"bg-white rounded-xl border p-4 mb-6"},go={key:1,class:"text-center py-12 text-gray-500"},yo={key:2,class:"space-y-3"},_o={class:"flex items-center gap-3 flex-1 min-w-0"},ho=["onClick"],ko={class:"min-w-0"},wo={class:"flex gap-2 text-xs text-gray-400"},Co={key:0},jo={key:1},qo={class:"flex items-center gap-2 self-end sm:self-center"},Do={key:0,class:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-medium"},zo=["onClick"],$o=["onClick"],Mo={key:2},So={class:"mb-10"},Vo={class:"flex justify-between items-center mb-6"},Ro={class:"text-sm text-gray-500"},To={key:0,class:"bg-white rounded-xl border p-5 mb-6"},Ao={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto"},Po=["value"],Eo={class:"text-sm text-gray-700"},No={class:"flex gap-3"},Uo=["disabled"],Fo={key:1,class:"text-center py-8 text-gray-500 text-sm"},Io={key:2,class:"space-y-4"},Bo={class:"flex items-center justify-between mb-3"},Lo={class:"flex items-center gap-3"},Jo={class:"w-10 h-10 bg-violet-100 text-violet-700 rounded-lg flex items-center justify-center text-sm font-bold"},Oo={class:"font-semibold text-gray-800"},Ho={class:"text-xs text-gray-400"},Wo={class:"flex items-center gap-2"},Yo=["onClick"],Xo=["onClick"],Ko={class:"flex flex-wrap gap-2"},Qo={class:"w-5 h-5 bg-violet-200 rounded-full flex items-center justify-center text-[10px] font-bold"},Go=["onClick"],Zo={key:0,class:"mt-3 pt-3 border-t"},en={class:"flex flex-wrap gap-2"},tn=["onClick"],sn={key:0,class:"text-xs text-gray-400 italic"},on={class:"text-sm text-gray-500 mb-6"},nn={key:0,class:"text-center py-12 text-gray-500"},ln={key:1,class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},an={class:"flex items-center gap-3 mb-3"},rn={class:"font-medium text-gray-800"},dn={key:0,class:"text-xs text-emerald-600"},un={class:"text-xs text-gray-500 space-y-1"},mn={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},cn={class:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between rounded-t-2xl z-10"},xn={class:"text-lg font-semibold text-gray-900 capitalize"},vn={class:"text-xs text-emerald-600 font-medium"},pn={class:"px-6 py-5 space-y-6"},bn={class:"flex items-center justify-between"},fn={key:0},gn={class:"text-sm font-medium text-gray-700 mb-2"},yn={class:"flex flex-wrap gap-1.5"},_n={key:0,class:"text-xs bg-emerald-100 text-emerald-700 px-2.5 py-1 rounded-lg font-medium"},hn={key:0,class:"space-y-2 mb-3"},kn={class:"flex items-center gap-2 text-sm min-w-0"},wn=["onClick"],Cn={class:"flex items-center gap-1.5 flex-shrink-0"},jn={key:0,class:"text-[11px] bg-violet-100 text-violet-700 px-1.5 py-0.5 rounded"},qn={key:1,class:"text-[11px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded"},Dn=["onClick"],zn=["onClick"],$n={key:1,class:"text-sm text-gray-400 mb-3"},Mn=["disabled"],Sn={key:1},Vn={class:"space-y-1.5"},Rn={key:0,class:"text-[11px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded ml-auto"},Tn={key:0,class:"space-y-2.5 mb-4"},An={class:"flex items-start justify-between gap-2"},Pn={class:"min-w-0 flex-1"},En={class:"text-sm text-gray-800"},Nn={class:"text-[11px] text-gray-400 mt-1"},Un=["onClick"],Fn={key:1,class:"text-sm text-gray-400 mb-4"},In=["disabled"],Qn={__name:"EspaceBenevole",setup(Bn){const Ee=ht(),ke=b(!0),O=b(null),a=b(null),ee=N(()=>{var o;return["admin","superadmin"].includes((o=a.value)==null?void 0:o.role)}),we=N(()=>{var o;return((o=a.value)==null?void 0:o.role)==="superadmin"}),U=b("benevole");let te=null;const Ne=[{titre:"Enseignement",desc:"Cours de Coran, langue arabe, soutien scolaire.",icon:Dt},{titre:"Social & Entraide",desc:"Distribution alimentaire, aide aux familles.",icon:wt},{titre:"Événements",desc:"Organisation, accueil des visiteurs, logistique.",icon:Ve},{titre:"Entretien & Travaux",desc:"Nettoyage, petits travaux, maintenance.",icon:zt},{titre:"Communication",desc:"Réseaux sociaux, site web, graphisme.",icon:$t},{titre:"Cuisine Ramadan",desc:"Préparation des repas d'iftar.",icon:Mt}];pt(async()=>{const{data:{session:o}}=await m.auth.getSession();if(O.value=o,o){const e=be(),{data:r}=await m.from("benevoles").select("*").eq("email",o.user.email).eq("statut","accepté").single();r&&(a.value=r,await e)}ke.value=!1,o&&!a.value&&(te=setInterval(async()=>{var r,t;if(a.value){clearInterval(te);return}const{data:e}=await m.from("benevoles").select("*").eq("email",(t=(r=O.value)==null?void 0:r.user)==null?void 0:t.email).eq("statut","accepté").single();e&&(a.value=e,clearInterval(te),await be())},3e4)),m.auth.onAuthStateChange(async(e,r)=>{if(O.value=r,r){const t=be(),{data:d}=await m.from("benevoles").select("*").eq("email",r.user.email).eq("statut","accepté").single();d?(a.value=d,await t):a.value=null}else a.value=null})}),bt(()=>{te&&clearInterval(te)});const Ce=async()=>{await m.auth.signOut(),O.value=null,a.value=null,Ee.push("/")},H=N(()=>a.value?`${a.value.prenom} ${a.value.nom}`:""),W=b(!1),le=b(!1),y=b({disponible:!0,dispo_debut:"",dispo_fin:"",dispo_motif:""}),Ue=()=>{y.value={disponible:a.value.disponible!==!1,dispo_debut:a.value.dispo_debut||"",dispo_fin:a.value.dispo_fin||"",dispo_motif:a.value.dispo_motif||""},W.value=!0},Fe=async()=>{le.value=!0;const o={disponible:y.value.disponible,dispo_debut:y.value.dispo_debut||null,dispo_fin:y.value.dispo_fin||null,dispo_motif:y.value.dispo_motif||null};await m.from("benevoles").update(o).eq("id",a.value.id),a.value.disponible=o.disponible,a.value.dispo_debut=o.dispo_debut,a.value.dispo_fin=o.dispo_fin,a.value.dispo_motif=o.dispo_motif;let e=`${H.value} est maintenant `;o.disponible?e+="disponible":e+="indisponible",o.dispo_debut||o.dispo_fin?(e+=" du "+(o.dispo_debut?X(o.dispo_debut):"?"),e+=" au "+(o.dispo_fin?X(o.dispo_fin):"?")):e+=" (indéfini)",o.dispo_motif&&(e+=` — ${o.dispo_motif}`),e+=".",await m.from("notifications").insert({type:"disponibilite",message:e,benevole_id:a.value.id}),le.value=!1,W.value=!1},Y=b("planning"),M=b("taches"),ae=b(!0),S=b([]),V=b([]),h=b([]),A=b([]),P=b([]),ve=[],Ie=new Date(2026,1,18);for(let o=0;o<30;o++){const e=new Date(Ie);e.setDate(e.getDate()+o),ve.push(e)}const k=o=>{const e=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),t=String(o.getDate()).padStart(2,"0");return`${e}-${r}-${t}`},Be=o=>o.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),X=o=>o?new Date(o+"T00:00:00").toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"",Le=new Set(ve.map(o=>k(o))),Je=o=>Le.has(k(o)),je=o=>{const e=k(o),r=ve.findIndex(t=>k(t)===e);return r>=0?r+1:0},K=b(1),pe=new Date,Oe=N(()=>{const o=[],r=K.value===1?1:2;let d=new Date(2026,r,1).getDay()-1;d<0&&(d=6);const $=new Date(2026,r+1,0).getDate();for(let j=0;j<d;j++)o.push({date:null,isRamadan:!1,isToday:!1});for(let j=1;j<=$;j++){const T=new Date(2026,r,j),Se=T.getDate()===pe.getDate()&&T.getMonth()===pe.getMonth()&&T.getFullYear()===pe.getFullYear();o.push({date:T,isRamadan:Je(T),ramadanDay:je(T),isToday:Se})}const I=o.length%7;if(I>0)for(let j=0;j<7-I;j++)o.push({date:null,isRamadan:!1,isToday:!1});return o}),f=b(null),F=b(""),Q=b(""),He=async()=>{if(!Q.value.trim()||!f.value)return;const o=k(f.value),e={id:Date.now(),nom:Q.value.trim(),jour:o,benevole_id:null,fait:!1,created_by:a.value.id};h.value.push(e),Q.value="";const{data:r}=await m.from("ramadan_taches").insert({nom:e.nom,jour:e.jour,created_by:a.value.id}).select();if(r&&r[0]){const t=h.value.findIndex(d=>d.id===e.id);t!==-1&&(h.value[t]=r[0])}},We=o=>{f.value=o,F.value=""},be=async()=>{ae.value=!0;const[o,e,r,t,d,$,I]=await Promise.all([m.from("ramadan_presences").select("*"),m.from("benevoles").select("id, prenom, nom").eq("statut","accepté"),m.from("ramadan_taches").select("*"),m.from("ramadan_produits").select("*").order("created_at"),m.from("ramadan_notes").select("*").order("created_at"),m.from("equipes").select("*").order("created_at"),m.from("equipe_membres").select("*")]);S.value=o.data||[],V.value=e.data||[],h.value=r.data||[],A.value=t.data||[],P.value=d.data||[],R.value=$.data||[],E.value=I.data||[],ae.value=!1},G=o=>S.value.some(e=>e.benevole_id===a.value.id&&e.jour===k(o)),Ye=N(()=>S.value.filter(o=>{var e;return o.benevole_id===((e=a.value)==null?void 0:e.id)}).length),ie=o=>S.value.filter(e=>e.jour===k(o)).length,Xe=o=>S.value.filter(r=>r.jour===k(o)&&r.benevole_id!==a.value.id).map(r=>r.benevole_id).map(r=>{const t=V.value.find(d=>d.id===r);return t?`${t.prenom} ${t.nom}`:"Inconnu"}),Ke=async o=>{const e=k(o),r=G(o);r?S.value=S.value.filter(t=>!(t.benevole_id===a.value.id&&t.jour===e)):S.value.push({benevole_id:a.value.id,jour:e}),r?await m.from("ramadan_presences").delete().eq("benevole_id",a.value.id).eq("jour",e):await m.from("ramadan_presences").insert({benevole_id:a.value.id,jour:e})},se=o=>h.value.filter(e=>e.jour===k(o)),Qe=N(()=>[...h.value].sort((o,e)=>o.fait!==e.fait?o.fait?1:-1:o.jour<e.jour?-1:1)),Ge=N(()=>h.value.filter(o=>!o.fait).length),re=b(!1),C=b({nom:"",jour:"",equipe_id:""}),Ze=async()=>{if(!C.value.nom.trim()||!C.value.jour)return;const o={id:Date.now(),nom:C.value.nom.trim(),jour:C.value.jour,benevole_id:null,equipe_id:C.value.equipe_id||null,fait:!1,created_by:a.value.id};h.value.push(o),C.value={nom:"",jour:"",equipe_id:""},re.value=!1;const e={nom:o.nom,jour:o.jour,created_by:a.value.id};o.equipe_id&&(e.equipe_id=o.equipe_id);const{data:r}=await m.from("ramadan_taches").insert(e).select();if(r&&r[0]){const t=h.value.findIndex(d=>d.id===o.id);t!==-1&&(h.value[t]=r[0])}},qe=async o=>{o.fait=!o.fait,o.fait?(o.benevole_id=a.value.id,await m.from("ramadan_taches").update({fait:!0,benevole_id:a.value.id}).eq("id",o.id)):(o.benevole_id=null,await m.from("ramadan_taches").update({fait:!1,benevole_id:null}).eq("id",o.id))},De=async o=>{o.benevole_id=a.value.id,await m.from("ramadan_taches").update({benevole_id:a.value.id}).eq("id",o.id)},et=async o=>{o.benevole_id=null,await m.from("ramadan_taches").update({benevole_id:null}).eq("id",o.id)},ze=async o=>{h.value=h.value.filter(e=>e.id!==o),await m.from("ramadan_taches").delete().eq("id",o)},de=o=>{if(!o)return null;const e=V.value.find(r=>r.id===o);return e?`${e.prenom} ${e.nom}`:null},$e=o=>P.value.filter(e=>e.jour===k(o)),fe=o=>P.value.filter(e=>e.jour===k(o)).length,tt=o=>{if(!o)return"";const e=new Date(o);return e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})+" à "+e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},st=async()=>{if(!F.value.trim()||!f.value)return;const o=k(f.value),e={id:Date.now(),jour:o,contenu:F.value.trim(),auteur_nom:H.value,benevole_id:a.value.id,created_at:new Date().toISOString()};P.value.push(e),F.value="";const{data:r}=await m.from("ramadan_notes").insert({jour:o,contenu:e.contenu,auteur_nom:e.auteur_nom,benevole_id:a.value.id}).select();if(r&&r[0]){const t=P.value.findIndex(d=>d.id===e.id);t!==-1&&(P.value[t]=r[0])}},ot=async o=>{P.value=P.value.filter(e=>e.id!==o),await m.from("ramadan_notes").delete().eq("id",o)},ue=b(!1),z=b({nom:"",quantite:"",jour:""}),nt=N(()=>A.value.filter(o=>!o.en_stock).length),oe=o=>A.value.filter(e=>e.jour===k(o)),lt=async()=>{const o={id:Date.now(),nom:z.value.nom,quantite:z.value.quantite||null,jour:z.value.jour||null,en_stock:!1,responsable_nom:null};A.value.push(o),z.value={nom:"",quantite:"",jour:""},ue.value=!1;const{data:e}=await m.from("ramadan_produits").insert({nom:o.nom,quantite:o.quantite,jour:o.jour}).select();if(e&&e[0]){const r=A.value.findIndex(t=>t.id===o.id);r!==-1&&(A.value[r]=e[0])}},at=async o=>{o.en_stock=!o.en_stock,await m.from("ramadan_produits").update({en_stock:o.en_stock}).eq("id",o.id)},it=async o=>{o.responsable_nom=H.value,await m.from("ramadan_produits").update({responsable_nom:H.value}).eq("id",o.id)},rt=async o=>{o.responsable_nom=null,await m.from("ramadan_produits").update({responsable_nom:null}).eq("id",o.id)},R=b([]),E=b([]),Z=b(!1),ne=b(null),q=b({nom:"",membres:[]}),ge=o=>E.value.filter(e=>e.equipe_id===o),ye=o=>V.value.find(e=>e.id===o)||null,me=o=>{if(!o)return null;const e=R.value.find(r=>r.id===o);return e?e.nom:null},Me=o=>{const e=ge(o).map(r=>r.benevole_id);return V.value.filter(r=>!e.includes(r.id))},dt=async()=>{if(!q.value.nom.trim()||q.value.membres.length===0)return;const{data:o}=await m.from("equipes").insert({nom:q.value.nom.trim(),created_by:a.value.id}).select();if(!o||!o[0])return;const e=o[0];R.value.push(e);const t=[a.value.id,...q.value.membres].map($=>({equipe_id:e.id,benevole_id:$})),{data:d}=await m.from("equipe_membres").insert(t).select();d&&E.value.push(...d),q.value={nom:"",membres:[]},Z.value=!1},ut=async(o,e)=>{const{data:r}=await m.from("equipe_membres").insert({equipe_id:o,benevole_id:e}).select();r&&r[0]&&E.value.push(r[0])},mt=async(o,e)=>{E.value=E.value.filter(r=>r.id!==e),await m.from("equipe_membres").delete().eq("id",e)},ct=async o=>{confirm("Supprimer cette équipe ?")&&(R.value=R.value.filter(e=>e.id!==o),E.value=E.value.filter(e=>e.equipe_id!==o),await m.from("equipes").delete().eq("id",o))},xt=o=>S.value.filter(e=>e.benevole_id===o).length,vt=o=>h.value.filter(e=>e.benevole_id===o).length;return(o,e)=>{const r=ft("router-link");return n(),l("div",At,[ke.value?(n(),l("div",Pt,[...e[35]||(e[35]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):O.value?a.value?(n(),l("div",Yt,[s("div",Xt,[s("div",Kt,[s("div",Qt,[c(v(Re),{size:24,class:"text-emerald-400"}),s("div",null,[s("h1",Gt,i(a.value.prenom)+" "+i(a.value.nom),1),s("p",Zt,i(a.value.domaine),1)])]),s("div",es,[we.value?(n(),l("button",{key:0,onClick:e[0]||(e[0]=t=>U.value=U.value==="benevole"?"visiteur":"benevole"),class:p(["flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors",U.value==="visiteur"?"bg-amber-500 text-white":"bg-white/10 text-gray-300 hover:text-white"])},[c(v(Pe),{size:14}),x(" "+i(U.value==="visiteur"?"Vue visiteur":"Vue bénévole"),1)],2)):u("",!0),c(r,{to:"/",class:"text-gray-400 hover:text-white transition-colors text-xs sm:text-sm"},{default:B(()=>[...e[52]||(e[52]=[x(" Voir le site ",-1)])]),_:1}),s("button",{onClick:Ce,class:"text-gray-400 hover:text-white transition-colors flex items-center gap-1 text-xs sm:text-sm"},[c(v(gt),{size:16}),e[53]||(e[53]=s("span",{class:"hidden sm:inline"},"Déconnexion",-1))])])])]),s("div",ts,[s("div",{class:p(["rounded-xl border p-4 sm:p-5",a.value.disponible!==!1?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"])},[s("div",ss,[s("div",os,[s("div",{class:p(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",a.value.disponible!==!1?"bg-emerald-100":"bg-red-100"])},[a.value.disponible!==!1?(n(),_e(v(Te),{key:0,size:20,class:"text-emerald-600"})):(n(),_e(v(Ae),{key:1,size:20,class:"text-red-600"}))],2),s("div",null,[s("p",{class:p(["font-semibold",a.value.disponible!==!1?"text-emerald-800":"text-red-800"])},i(a.value.disponible!==!1?"Vous êtes disponible":"Vous êtes indisponible"),3),a.value.dispo_debut||a.value.dispo_fin?(n(),l("p",{key:0,class:p(["text-xs",a.value.disponible!==!1?"text-emerald-600":"text-red-600"])},i(a.value.dispo_debut?"Du "+X(a.value.dispo_debut):"")+" "+i(a.value.dispo_fin?" au "+X(a.value.dispo_fin):""),3)):(n(),l("p",{key:1,class:p(["text-xs",a.value.disponible!==!1?"text-emerald-600":"text-red-600"])}," Indéfini ",2)),a.value.dispo_motif?(n(),l("p",{key:2,class:p(["text-xs italic mt-0.5",a.value.disponible!==!1?"text-emerald-500":"text-red-500"])},i(a.value.dispo_motif),3)):u("",!0)])]),s("button",{onClick:e[1]||(e[1]=t=>Ue()),class:p(["px-4 py-2 rounded-xl text-sm font-medium transition-colors",a.value.disponible!==!1?"bg-white text-emerald-700 border border-emerald-300 hover:bg-emerald-100":"bg-white text-red-700 border border-red-300 hover:bg-red-100"])}," Modifier ma disponibilité ",2)])],2)]),W.value?(n(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e[9]||(e[9]=L(t=>W.value=!1,["self"]))},[s("div",{class:"absolute inset-0 bg-black/40",onClick:e[2]||(e[2]=t=>W.value=!1)}),s("div",ns,[s("div",ls,[e[54]||(e[54]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Ma disponibilité",-1)),s("button",{onClick:e[3]||(e[3]=t=>W.value=!1),class:"text-gray-400 hover:text-gray-600 p-1"},[c(v(J),{size:20})])]),s("div",as,[s("div",is,[s("button",{onClick:e[4]||(e[4]=t=>y.value.disponible=!0),class:p([y.value.disponible?"bg-emerald-600 text-white ring-2 ring-emerald-300":"bg-gray-100 text-gray-600 hover:bg-gray-200","flex-1 py-3 rounded-xl font-medium text-sm transition-all flex items-center justify-center gap-2"])},[c(v(Te),{size:18}),e[55]||(e[55]=x(" Disponible ",-1))],2),s("button",{onClick:e[5]||(e[5]=t=>y.value.disponible=!1),class:p([y.value.disponible?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-red-600 text-white ring-2 ring-red-300","flex-1 py-3 rounded-xl font-medium text-sm transition-all flex items-center justify-center gap-2"])},[c(v(Ae),{size:18}),e[56]||(e[56]=x(" Indisponible ",-1))],2)]),s("div",rs,[s("p",ds,i(y.value.disponible?"Précisez vos dates de disponibilité ou laissez vide pour indéfini.":"Précisez vos dates d'indisponibilité ou laissez vide pour indéfini."),1),s("div",us,[s("div",null,[e[57]||(e[57]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Du (optionnel)",-1)),w(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>y.value.dispo_debut=t),type:"date",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,y.value.dispo_debut]])]),s("div",null,[e[58]||(e[58]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Au (optionnel)",-1)),w(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>y.value.dispo_fin=t),type:"date",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,y.value.dispo_fin]])])]),s("div",null,[e[59]||(e[59]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Commentaire (optionnel)",-1)),w(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>y.value.dispo_motif=t),type:"text",placeholder:y.value.disponible?"Ex: Tous les week-ends, après 18h...":"Ex: Voyage, maladie, travail...",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,8,ms),[[D,y.value.dispo_motif]])])]),s("button",{onClick:Fe,disabled:le.value,class:"w-full bg-emerald-600 text-white py-3 rounded-xl font-medium hover:bg-emerald-700 transition-colors disabled:opacity-50"},i(le.value?"Enregistrement...":"Enregistrer"),9,cs)])])])):u("",!0),U.value==="visiteur"?(n(),l("div",xs,[s("div",vs,[c(v(Pe),{size:18,class:"text-amber-600 flex-shrink-0"}),e[60]||(e[60]=s("p",{class:"text-sm text-amber-800"},[x("Vous voyez la page telle qu'un "),s("strong",null,"visiteur non-bénévole"),x(' la voit. Cliquez sur "Vue bénévole" pour revenir.')],-1))]),e[61]||(e[61]=s("h2",{class:"text-2xl font-semibold text-gray-900 mb-8 text-center"},"Nos domaines de bénévolat",-1)),s("div",ps,[(n(),l(g,null,_(Ne,t=>s("div",{key:t.titre,class:"bg-white rounded-xl p-6 shadow-sm border"},[s("div",bs,[(n(),_e(kt(t.icon),{size:24,class:"text-emerald-600"}))]),s("h3",fs,i(t.titre),1),s("p",gs,i(t.desc),1)])),64))]),e[62]||(e[62]=s("div",{class:"max-w-2xl mx-auto text-center"},[s("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Formulaire de candidature"),s("p",{class:"text-gray-500 text-sm mb-6"},"Les visiteurs voient ici le formulaire pour envoyer leur candidature bénévole."),s("div",{class:"bg-gray-100 rounded-xl p-8 text-gray-400 text-sm italic"}," Formulaire de candidature (prénom, nom, email, téléphone, domaine, message) ")],-1))])):u("",!0),U.value==="benevole"?(n(),l("div",ys,[s("div",_s,[s("button",{onClick:e[10]||(e[10]=t=>Y.value="planning"),class:p([Y.value==="planning"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"])},[c(v(Ve),{size:18}),e[63]||(e[63]=x(" Planning ",-1))],2),s("button",{onClick:e[11]||(e[11]=t=>Y.value="organisation"),class:p([Y.value==="organisation"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"])},[c(v(Vt),{size:18}),e[64]||(e[64]=x(" Organisation ",-1))],2)])])):u("",!0),U.value==="benevole"?(n(),l("div",hs,[Y.value==="planning"?(n(),l("div",ks,[s("div",ws,[e[65]||(e[65]=s("div",null,[s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Ramadan 2026"),s("p",{class:"text-sm text-gray-500"},"18 février - 19 mars")],-1)),s("span",Cs," Vous : "+i(Ye.value)+" / 30 jours ",1)]),ae.value?(n(),l("div",js,[...e[66]||(e[66]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):(n(),l("div",qs,[s("div",Ds,[s("button",{onClick:e[12]||(e[12]=t=>K.value=1),class:p([K.value===1?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors flex items-center gap-2"])},[c(v(he),{size:16}),e[67]||(e[67]=x(" Février ",-1))],2),s("span",zs,i(K.value===1?"Février 2026":"Mars 2026"),1),s("button",{onClick:e[13]||(e[13]=t=>K.value=2),class:p([K.value===2?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors flex items-center gap-2"])},[e[68]||(e[68]=x(" Mars ",-1)),c(v(St),{size:16})],2)]),s("div",$s,[s("div",Ms,[(n(),l(g,null,_(["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],t=>s("div",{key:t,class:"py-3 text-center text-xs font-semibold text-gray-500 uppercase"},i(t),1)),64))]),s("div",Ss,[(n(!0),l(g,null,_(Oe.value,(t,d)=>(n(),l("div",{key:d,onClick:$=>t.isRamadan?We(t.date):null,class:p(["min-h-[80px] sm:min-h-[100px] border-b border-r p-1.5 sm:p-2 relative",[t.isRamadan?"cursor-pointer hover:bg-emerald-50/50 transition-colors":"",t.date?"":"bg-gray-50/50",t.isRamadan&&G(t.date)?"bg-emerald-50/40":"",t.isToday?"ring-2 ring-inset ring-emerald-500":""]])},[t.date?(n(),l(g,{key:0},[s("div",Rs,[s("span",{class:p(["text-sm font-medium",t.isRamadan?"text-gray-800":"text-gray-300"])},i(t.date.getDate()),3),t.isRamadan?(n(),l("span",Ts," J"+i(t.ramadanDay),1)):u("",!0)]),t.isRamadan?(n(),l(g,{key:0},[s("div",As,[G(t.date)?(n(),l("span",Ps)):u("",!0),ie(t.date)>0?(n(),l("span",Es,i(ie(t.date)),1)):u("",!0)]),fe(t.date)>0?(n(),l("div",Ns,[s("span",Us,i(fe(t.date))+" note"+i(fe(t.date)>1?"s":""),1)])):u("",!0),se(t.date).length>0?(n(),l("div",Fs,[s("span",Is,i(se(t.date).length)+" tâche"+i(se(t.date).length>1?"s":""),1)])):u("",!0),oe(t.date).length>0?(n(),l("div",Bs,[s("span",Ls,i(oe(t.date).length)+" course"+i(oe(t.date).length>1?"s":""),1)])):u("",!0)],64)):u("",!0)],64)):u("",!0)],10,Vs))),128))])]),e[69]||(e[69]=yt('<div class="flex flex-wrap gap-4 mt-4 text-xs text-gray-500"><div class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-emerald-500 inline-block"></span> Vous êtes présent </div><div class="flex items-center gap-1.5"><span class="bg-amber-100 text-amber-700 px-1 rounded text-[10px]">1</span> Notes </div><div class="flex items-center gap-1.5"><span class="bg-blue-100 text-blue-700 px-1 rounded text-[10px]">1</span> Tâches </div><div class="flex items-center gap-1.5"><span class="bg-orange-100 text-orange-700 px-1 rounded text-[10px]">1</span> Courses </div><div class="flex items-center gap-1.5"><span class="ring-2 ring-emerald-500 w-4 h-3 inline-block rounded-sm"></span> Aujourd&#39;hui </div></div>',1))]))])):u("",!0),Y.value==="organisation"?(n(),l("div",Js,[s("div",Os,[s("button",{onClick:e[14]||(e[14]=t=>M.value="taches"),class:p([M.value==="taches"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(v(Rt),{size:16}),e[70]||(e[70]=x(" Tâches ",-1))],2),s("button",{onClick:e[15]||(e[15]=t=>M.value="courses"),class:p([M.value==="courses"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(v(Tt),{size:16}),e[71]||(e[71]=x(" Courses ",-1))],2),s("button",{onClick:e[16]||(e[16]=t=>M.value="equipe"),class:p([M.value==="equipe"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(v(qt),{size:16}),e[72]||(e[72]=x(" Équipe ",-1))],2)]),ae.value?(n(),l("div",Hs,[...e[73]||(e[73]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):(n(),l(g,{key:1},[M.value==="taches"?(n(),l("div",Ws,[s("div",Ys,[s("div",null,[e[74]||(e[74]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Tâches à faire",-1)),s("p",Xs,i(Ge.value)+" tâche(s) restante(s)",1)]),s("button",{onClick:e[17]||(e[17]=t=>re.value=!re.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(v(ce),{size:16}),e[75]||(e[75]=x(" Ajouter ",-1))])]),re.value?(n(),l("div",Ks,[s("form",{onSubmit:L(Ze,["prevent"]),class:"space-y-3"},[s("div",Qs,[w(s("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>C.value.nom=t),required:"",placeholder:"Nom de la tâche",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,C.value.nom]]),w(s("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>C.value.jour=t),type:"date",required:"",min:"2026-02-18",max:"2026-03-19",class:"sm:w-44 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,C.value.jour]])]),s("div",Gs,[s("div",Zs,[e[77]||(e[77]=s("label",{class:"block text-xs text-gray-500 mb-1"},"Assigner à une équipe (optionnel)",-1)),w(s("select",{"onUpdate:modelValue":e[20]||(e[20]=t=>C.value.equipe_id=t),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},[e[76]||(e[76]=s("option",{value:""},"Aucune équipe",-1)),(n(!0),l(g,null,_(R.value,t=>(n(),l("option",{key:t.id,value:t.id},i(t.nom),9,eo))),128))],512),[[_t,C.value.equipe_id]])]),e[78]||(e[78]=s("button",{type:"submit",class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium"}," Ajouter ",-1))])],32)])):u("",!0),h.value.length===0?(n(),l("div",to," Aucune tâche pour le moment. ")):(n(),l("div",so,[(n(!0),l(g,null,_(Qe.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4 flex flex-col sm:flex-row sm:items-center gap-3"},[s("div",oo,[s("button",{onClick:d=>qe(t),class:p([t.fait?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400","w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors text-sm font-bold"])},i(t.fait?"✓":""),11,no),s("div",lo,[s("p",{class:p(["font-medium",t.fait?"line-through text-gray-400":"text-gray-800"])},i(t.nom),3),s("p",ao,i(X(t.jour)),1)])]),s("div",io,[me(t.equipe_id)?(n(),l("span",ro,i(me(t.equipe_id)),1)):u("",!0),de(t.benevole_id)?(n(),l("span",uo,i(de(t.benevole_id)),1)):u("",!0),!t.benevole_id&&!t.equipe_id?(n(),l("button",{key:2,onClick:d=>De(t),class:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-colors font-medium"}," Je m'en charge ",8,mo)):t.benevole_id===a.value.id?(n(),l("button",{key:3,onClick:d=>et(t),class:"text-xs text-gray-400 hover:text-red-600 transition-colors"}," Annuler ",8,co)):u("",!0),ee.value||t.created_by===a.value.id?(n(),l("button",{key:4,onClick:d=>ze(t.id),class:"text-gray-300 hover:text-red-500 transition-colors p-0.5"},[c(v(J),{size:14})],8,xo)):u("",!0)])]))),128))]))])):u("",!0),M.value==="courses"?(n(),l("div",vo,[s("div",po,[s("div",null,[e[79]||(e[79]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Liste des courses",-1)),s("p",bo,i(nt.value)+" produit(s) manquant(s)",1)]),s("button",{onClick:e[21]||(e[21]=t=>ue.value=!ue.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(v(ce),{size:16}),e[80]||(e[80]=x(" Ajouter ",-1))])]),ue.value?(n(),l("div",fo,[s("form",{onSubmit:L(lt,["prevent"]),class:"flex flex-col sm:flex-row gap-3"},[w(s("input",{"onUpdate:modelValue":e[22]||(e[22]=t=>z.value.nom=t),required:"",placeholder:"Nom du produit",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,z.value.nom]]),w(s("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>z.value.quantite=t),placeholder:"Quantité (ex: 5 kg)",class:"sm:w-40 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,z.value.quantite]]),w(s("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>z.value.jour=t),type:"date",min:"2026-02-18",max:"2026-03-19",placeholder:"Jour (optionnel)",class:"sm:w-44 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,z.value.jour]]),e[81]||(e[81]=s("button",{type:"submit",class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium"}," Ajouter ",-1))],32)])):u("",!0),A.value.length===0?(n(),l("div",go," Aucun produit dans la liste pour le moment. ")):(n(),l("div",yo,[(n(!0),l(g,null,_(A.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4 flex flex-col sm:flex-row sm:items-center gap-3"},[s("div",_o,[s("button",{onClick:d=>at(t),class:p([t.en_stock?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600","w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors text-sm font-bold"])},i(t.en_stock?"✓":"✗"),11,ho),s("div",ko,[s("p",{class:p(["font-medium",t.en_stock?"line-through text-gray-400":"text-gray-800"])},i(t.nom),3),s("div",wo,[t.quantite?(n(),l("span",Co,i(t.quantite),1)):u("",!0),t.jour?(n(),l("span",jo,i(X(t.jour)),1)):u("",!0)])])]),s("div",qo,[t.responsable_nom?(n(),l("span",Do,i(t.responsable_nom),1)):u("",!0),t.responsable_nom?t.responsable_nom===H.value?(n(),l("button",{key:2,onClick:d=>rt(t),class:"text-xs text-gray-400 hover:text-red-600 transition-colors"}," Annuler ",8,$o)):u("",!0):(n(),l("button",{key:1,onClick:d=>it(t),class:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-colors font-medium"}," Je m'en charge ",8,zo))])]))),128))]))])):u("",!0),M.value==="equipe"?(n(),l("div",Mo,[s("div",So,[s("div",Vo,[s("div",null,[e[82]||(e[82]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Équipes",-1)),s("p",Ro,i(R.value.length)+" équipe(s) créée(s)",1)]),s("button",{onClick:e[25]||(e[25]=t=>Z.value=!Z.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(v(ce),{size:16}),e[83]||(e[83]=x(" Créer une équipe ",-1))])]),Z.value?(n(),l("div",To,[s("form",{onSubmit:L(dt,["prevent"]),class:"space-y-4"},[s("div",null,[e[84]||(e[84]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de l'équipe *",-1)),w(s("input",{"onUpdate:modelValue":e[26]||(e[26]=t=>q.value.nom=t),required:"",placeholder:"Ex: Équipe Cuisine, Équipe Service...",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,q.value.nom]])]),s("div",null,[e[85]||(e[85]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Membres *",-1)),s("div",Ao,[(n(!0),l(g,null,_(V.value.filter(t=>t.id!==a.value.id),t=>(n(),l("label",{key:t.id,class:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-100 transition-colors"},[w(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[27]||(e[27]=d=>q.value.membres=d),class:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,8,Po),[[Ct,q.value.membres]]),s("span",Eo,i(t.prenom)+" "+i(t.nom),1)]))),128))]),e[86]||(e[86]=s("p",{class:"text-xs text-gray-400 mt-1"},"Vous serez automatiquement ajouté à l'équipe.",-1))]),s("div",No,[s("button",{type:"submit",disabled:!q.value.nom.trim()||q.value.membres.length===0,class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium disabled:opacity-50"}," Créer ",8,Uo),s("button",{type:"button",onClick:e[28]||(e[28]=t=>Z.value=!1),class:"text-gray-500 hover:text-gray-700 text-sm"}," Annuler ")])],32)])):u("",!0),R.value.length===0&&!Z.value?(n(),l("div",Fo," Aucune équipe pour le moment. Créez-en une ! ")):(n(),l("div",Io,[(n(!0),l(g,null,_(R.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4"},[s("div",Bo,[s("div",Lo,[s("div",Jo,i(t.nom.substring(0,2).toUpperCase()),1),s("div",null,[s("p",Oo,i(t.nom),1),s("p",Ho,i(ge(t.id).length)+" membre(s)",1)])]),s("div",Wo,[t.created_by===a.value.id||ee.value?(n(),l("button",{key:0,onClick:d=>ne.value=ne.value===t.id?null:t.id,class:"text-xs text-gray-400 hover:text-emerald-600 transition-colors px-2 py-1"},i(ne.value===t.id?"Fermer":"Modifier"),9,Yo)):u("",!0),t.created_by===a.value.id||we.value?(n(),l("button",{key:1,onClick:d=>ct(t.id),class:"text-gray-300 hover:text-red-500 transition-colors p-1"},[c(v(J),{size:14})],8,Xo)):u("",!0)])]),s("div",Ko,[(n(!0),l(g,null,_(ge(t.id),d=>{var $,I,j,T;return n(),l("span",{key:d.id,class:"inline-flex items-center gap-1.5 text-xs bg-violet-50 text-violet-700 px-2.5 py-1 rounded-lg font-medium"},[s("span",Qo,i(((I=($=ye(d.benevole_id))==null?void 0:$.prenom)==null?void 0:I[0])||"?"),1),x(" "+i((j=ye(d.benevole_id))==null?void 0:j.prenom)+" "+i((T=ye(d.benevole_id))==null?void 0:T.nom)+" ",1),(t.created_by===a.value.id||ee.value)&&ne.value===t.id&&d.benevole_id!==a.value.id?(n(),l("button",{key:0,onClick:Se=>mt(t.id,d.id),class:"text-violet-400 hover:text-red-500 transition-colors ml-0.5"},[c(v(J),{size:12})],8,Go)):u("",!0)])}),128))]),ne.value===t.id?(n(),l("div",Zo,[e[87]||(e[87]=s("p",{class:"text-xs text-gray-500 mb-2"},"Ajouter un membre :",-1)),s("div",en,[(n(!0),l(g,null,_(Me(t.id),d=>(n(),l("button",{key:d.id,onClick:$=>ut(t.id,d.id),class:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-lg hover:bg-emerald-50 hover:text-emerald-700 transition-colors"}," + "+i(d.prenom)+" "+i(d.nom),9,tn))),128)),Me(t.id).length===0?(n(),l("span",sn," Tous les bénévoles sont déjà dans l'équipe ")):u("",!0)])])):u("",!0)]))),128))]))]),s("div",null,[e[88]||(e[88]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2"},"Tous les bénévoles",-1)),s("p",on,i(V.value.length)+" bénévole(s) accepté(s)",1),V.value.length===0?(n(),l("div",nn," Aucun bénévole accepté pour le moment. ")):(n(),l("div",ln,[(n(!0),l(g,null,_(V.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4"},[s("div",an,[s("div",{class:p(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",t.id===a.value.id?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-500"])},i(t.prenom[0])+i(t.nom[0]),3),s("div",null,[s("p",rn,[x(i(t.prenom)+" "+i(t.nom)+" ",1),t.id===a.value.id?(n(),l("span",dn,"(vous)")):u("",!0)])])]),s("div",un,[s("p",null,i(xt(t.id))+" jour(s) de présence",1),s("p",null,i(vt(t.id))+" tâche(s) assignée(s)",1)])]))),128))]))])])):u("",!0)],64))])):u("",!0)])):u("",!0)])):(n(),l("div",Lt,[s("div",Jt,[c(r,{to:"/",class:"inline-flex items-center gap-2 text-gray-500 mb-6 hover:text-gray-700 transition-colors text-sm"},{default:B(()=>[c(v(he),{size:16}),e[47]||(e[47]=x(" Retour au site ",-1))]),_:1}),s("div",Ot,[c(v(jt),{size:32,class:"text-yellow-600"})]),e[51]||(e[51]=s("h1",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Accès en attente",-1)),s("p",Ht,[e[48]||(e[48]=x(" Votre candidature n'a pas encore été acceptée, ou vous n'avez pas encore fait de demande de bénévolat avec l'email ",-1)),s("strong",null,i(O.value.user.email),1),e[49]||(e[49]=x(". ",-1))]),s("div",Wt,[c(r,{to:"/benevole",class:"block w-full bg-emerald-600 text-white py-3 rounded-xl hover:bg-emerald-700 transition-colors font-medium"},{default:B(()=>[...e[50]||(e[50]=[x(" Faire une demande de bénévolat ",-1)])]),_:1}),s("button",{onClick:Ce,class:"block w-full border border-gray-300 text-gray-700 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium"}," Se déconnecter ")])])])):(n(),l("div",Et,[s("div",Nt,[c(r,{to:"/",class:"inline-flex items-center gap-2 text-gray-500 mb-6 hover:text-gray-700 transition-colors text-sm"},{default:B(()=>[c(v(he),{size:16}),e[36]||(e[36]=x(" Retour au site ",-1))]),_:1}),s("div",Ut,[c(v(Re),{size:32,class:"text-emerald-600"})]),e[45]||(e[45]=s("h1",{class:"text-2xl font-semibold text-gray-900"},"Espace Bénévole",-1)),e[46]||(e[46]=s("p",{class:"text-gray-500 mt-2 text-sm mb-8"}," Vous devez avoir un compte sur le site et avoir été accepté(e) comme bénévole pour accéder à cet espace. ",-1)),s("div",Ft,[c(r,{to:"/connexion",class:"block w-full bg-emerald-600 text-white py-3 rounded-xl hover:bg-emerald-700 transition-colors font-medium"},{default:B(()=>[...e[37]||(e[37]=[x(" Se connecter ",-1)])]),_:1}),c(r,{to:"/inscription",class:"block w-full border border-gray-300 text-gray-700 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium"},{default:B(()=>[...e[38]||(e[38]=[x(" Créer un compte ",-1)])]),_:1})]),s("div",It,[s("p",Bt,[e[40]||(e[40]=x(" 1. Créez un compte sur le site",-1)),e[41]||(e[41]=s("br",null,null,-1)),e[42]||(e[42]=x(" 2. Faites une demande sur la page ",-1)),c(r,{to:"/benevole",class:"text-emerald-600 hover:underline"},{default:B(()=>[...e[39]||(e[39]=[x("Devenir Bénévole",-1)])]),_:1}),e[43]||(e[43]=s("br",null,null,-1)),e[44]||(e[44]=x(" 3. Une fois accepté(e), revenez ici ",-1))])])])])),f.value?(n(),l("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e[34]||(e[34]=L(t=>f.value=null,["self"]))},[s("div",{class:"absolute inset-0 bg-black/40",onClick:e[29]||(e[29]=t=>f.value=null)}),s("div",mn,[s("div",cn,[s("div",null,[s("h3",xn,i(Be(f.value)),1),s("p",vn,"Jour "+i(je(f.value))+" du Ramadan",1)]),s("button",{onClick:e[30]||(e[30]=t=>f.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors p-1"},[c(v(J),{size:20})])]),s("div",pn,[s("div",bn,[e[89]||(e[89]=s("div",null,[s("p",{class:"font-medium text-gray-800"},"Votre présence"),s("p",{class:"text-xs text-gray-500"},"Serez-vous disponible ce jour ?")],-1)),s("button",{onClick:e[31]||(e[31]=t=>Ke(f.value)),class:p([G(f.value)?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-gray-200 text-gray-600 hover:bg-gray-300","px-5 py-2.5 rounded-xl text-sm font-medium transition-colors"])},i(G(f.value)?"Présent":"Absent"),3)]),ie(f.value)>0?(n(),l("div",fn,[s("p",gn," Bénévoles présents ("+i(ie(f.value))+") ",1),s("div",yn,[G(f.value)?(n(),l("span",_n,i(H.value)+" (vous) ",1)):u("",!0),(n(!0),l(g,null,_(Xe(f.value),t=>(n(),l("span",{key:t,class:"text-xs bg-gray-100 text-gray-600 px-2.5 py-1 rounded-lg"},i(t),1))),128))])])):u("",!0),s("div",null,[e[90]||(e[90]=s("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Tâches du jour",-1)),se(f.value).length>0?(n(),l("div",hn,[(n(!0),l(g,null,_(se(f.value),t=>(n(),l("div",{key:t.id,class:"flex items-center justify-between gap-2 bg-blue-50/50 rounded-lg px-3 py-2"},[s("div",kn,[s("button",{onClick:d=>qe(t),class:p([t.fait?"bg-emerald-100 text-emerald-600":"bg-gray-200 text-gray-400","w-6 h-6 rounded flex items-center justify-center flex-shrink-0 text-xs font-bold transition-colors"])},i(t.fait?"✓":""),11,wn),s("span",{class:p(t.fait?"line-through text-gray-400":"text-gray-700")},i(t.nom),3)]),s("div",Cn,[me(t.equipe_id)?(n(),l("span",jn,i(me(t.equipe_id)),1)):u("",!0),de(t.benevole_id)?(n(),l("span",qn,i(de(t.benevole_id)),1)):u("",!0),!t.benevole_id&&!t.equipe_id?(n(),l("button",{key:2,onClick:d=>De(t),class:"text-[11px] text-emerald-600 hover:underline"}," Prendre ",8,Dn)):u("",!0),ee.value||t.created_by===a.value.id?(n(),l("button",{key:3,onClick:d=>ze(t.id),class:"text-gray-300 hover:text-red-500 transition-colors"},[c(v(J),{size:14})],8,zn)):u("",!0)])]))),128))])):(n(),l("p",$n,"Aucune tâche pour ce jour.")),s("form",{onSubmit:L(He,["prevent"]),class:"flex gap-2"},[w(s("input",{"onUpdate:modelValue":e[32]||(e[32]=t=>Q.value=t),placeholder:"Ajouter une tâche...",class:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,Q.value]]),s("button",{type:"submit",disabled:!Q.value.trim(),class:"bg-emerald-600 text-white px-3 py-2 rounded-lg hover:bg-emerald-700 text-sm disabled:opacity-40"},[c(v(ce),{size:16})],8,Mn)],32)]),oe(f.value).length>0?(n(),l("div",Sn,[e[91]||(e[91]=s("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Courses pour ce jour",-1)),s("div",Vn,[(n(!0),l(g,null,_(oe(f.value),t=>(n(),l("div",{key:t.id,class:"flex items-center gap-2 text-sm"},[s("span",{class:p(["w-1.5 h-1.5 rounded-full flex-shrink-0",t.en_stock?"bg-emerald-500":"bg-red-400"])},null,2),s("span",{class:p(t.en_stock?"line-through text-gray-400":"text-gray-700")},[x(i(t.nom),1),t.quantite?(n(),l(g,{key:0},[x(" ("+i(t.quantite)+")",1)],64)):u("",!0)],2),t.responsable_nom?(n(),l("span",Rn,i(t.responsable_nom),1)):u("",!0)]))),128))])])):u("",!0),s("div",null,[e[92]||(e[92]=s("p",{class:"text-sm font-medium text-gray-700 mb-3"},"Notes partagées",-1)),$e(f.value).length>0?(n(),l("div",Tn,[(n(!0),l(g,null,_($e(f.value),t=>(n(),l("div",{key:t.id,class:"bg-gray-50 rounded-xl px-4 py-3"},[s("div",An,[s("div",Pn,[s("p",En,i(t.contenu),1),s("p",Nn,i(t.auteur_nom)+" · "+i(tt(t.created_at)),1)]),ee.value||t.benevole_id===a.value.id?(n(),l("button",{key:0,onClick:d=>ot(t.id),class:"text-gray-300 hover:text-red-500 transition-colors flex-shrink-0 p-0.5"},[c(v(J),{size:14})],8,Un)):u("",!0)])]))),128))])):(n(),l("p",Fn,"Aucune note pour ce jour.")),s("form",{onSubmit:L(st,["prevent"]),class:"flex gap-2"},[w(s("input",{"onUpdate:modelValue":e[33]||(e[33]=t=>F.value=t),placeholder:"Écrire une note...",class:"flex-1 px-4 py-2.5 border rounded-xl text-sm focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[D,F.value]]),s("button",{type:"submit",disabled:!F.value.trim(),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm font-medium disabled:opacity-40"}," Ajouter ",8,In)],32)])])])])):u("",!0)])}}};export{Qn as default};
