import{c as re,r as p,a as U,o as wt,z as m,J as Ct,b as l,d as n,k as d,e as s,f as c,w as H,g as b,u as x,h as jt,t as i,n as f,L as qt,D as je,A as F,X as B,i as j,v as D,F as y,l as h,C as Ae,m as Dt,x as zt,E as $t,K as St,H as Mt,I as Vt}from"./index-CIg7Y9mF.js";import{C as qe}from"./chevron-left-DNiIm_Ka.js";import{U as Pe,a as Ue,C as Fe,P as fe}from"./user-check-CSa9Sqc9.js";import{C as Rt}from"./clock-mJ1Td11t.js";import{E as Be}from"./eye-Be8F1rml.js";import{U as Nt}from"./users-wmYCNpAV.js";import{B as Et}from"./book-open-CsiHxctT.js";import{W as Tt,M as At,U as Pt,S as Ut}from"./wrench-Cl1WVEq-.js";/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=re("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=re("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=re("list-checks",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=re("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=re("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Jt={class:"min-h-screen bg-gray-50"},Ht={key:0,class:"min-h-screen flex items-center justify-center"},Wt={key:1,class:"min-h-screen flex items-center justify-center px-4"},Yt={class:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md text-center"},Xt={class:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4"},Kt={class:"space-y-3"},Qt={class:"mt-6 pt-6 border-t"},Gt={class:"text-xs text-gray-400"},Zt={key:2,class:"min-h-screen flex items-center justify-center px-4"},es={class:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md text-center"},ts={class:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4"},ss={class:"text-gray-500 text-sm mb-6"},os={class:"space-y-3"},ns={key:3},ls={class:"bg-[#030213] text-white px-4 py-4"},as={class:"max-w-7xl mx-auto flex justify-between items-center"},is={class:"flex items-center gap-3"},rs={class:"text-lg font-semibold"},ds={class:"text-xs text-gray-400"},us={class:"flex items-center gap-3 sm:gap-4"},ms={class:"max-w-7xl mx-auto px-4 pt-6"},cs={class:"flex flex-col sm:flex-row sm:items-center gap-4"},vs={class:"flex items-center gap-3 flex-1"},xs={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md"},ps={class:"border-b px-6 py-4 flex items-center justify-between"},bs={class:"px-6 py-5 space-y-5"},fs={class:"flex gap-3"},gs={class:"space-y-3"},ys={class:"text-xs text-gray-500"},_s={class:"grid grid-cols-2 gap-3"},hs=["placeholder"],ks=["disabled"],ws={key:1,class:"max-w-7xl mx-auto px-4 py-8"},Cs={class:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 flex items-center gap-3"},js={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-16"},qs={class:"w-12 h-12 bg-emerald-50 rounded-lg flex items-center justify-center mb-4"},Ds={class:"font-semibold text-gray-800 mb-2"},zs={class:"text-sm text-gray-600"},$s={key:2,class:"bg-white border-b"},Ss={class:"max-w-7xl mx-auto flex"},Ms={key:3,class:"max-w-7xl mx-auto px-4 py-8"},Vs={key:0},Rs={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-6"},Ns={class:"text-sm bg-emerald-100 text-emerald-700 px-3 py-1.5 rounded-full font-medium self-start"},Es={key:0,class:"text-center py-12"},Ts={key:1},As={class:"flex items-center justify-between mb-4"},Ps={class:"text-sm font-medium text-gray-600"},Us={class:"bg-white rounded-2xl border overflow-hidden"},Fs={class:"grid grid-cols-7 bg-gray-50 border-b"},Bs={class:"grid grid-cols-7"},Ls=["onClick"],Is={class:"flex items-start justify-between"},Os={key:0,class:"text-[10px] text-emerald-600 font-bold"},Js={class:"mt-1 flex flex-wrap gap-1"},Hs={key:0,class:"w-2 h-2 rounded-full bg-emerald-500 inline-block"},Ws={key:1,class:"text-[10px] text-gray-400"},Ys={key:0,class:"mt-0.5"},Xs={class:"text-[10px] bg-amber-100 text-amber-700 px-1 rounded"},Ks={key:1,class:"mt-0.5 hidden sm:block"},Qs={class:"text-[10px] bg-blue-100 text-blue-700 px-1 rounded"},Gs={key:2,class:"mt-0.5 hidden sm:block"},Zs={class:"text-[10px] bg-orange-100 text-orange-700 px-1 rounded"},eo={key:1},to={class:"flex gap-2 mb-6 overflow-x-auto"},so={key:0,class:"text-center py-12"},oo={key:0},no={class:"flex justify-between items-center mb-6"},lo={class:"text-sm text-gray-500"},ao={key:0,class:"bg-white rounded-xl border p-4 mb-6"},io={class:"flex flex-col sm:flex-row gap-3"},ro={class:"flex flex-col sm:flex-row gap-3 items-end"},uo={class:"flex-1"},mo=["value"],co={key:1,class:"text-center py-12 text-gray-500"},vo={key:2,class:"space-y-3"},xo={class:"flex items-center gap-3 flex-1 min-w-0"},po=["onClick"],bo={class:"min-w-0"},fo={class:"text-xs text-gray-400"},go={class:"flex items-center gap-2 self-end sm:self-center flex-wrap"},yo={key:0,class:"text-xs bg-violet-50 text-violet-700 px-2 py-1 rounded font-medium"},_o={key:1,class:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-medium"},ho=["onClick"],ko=["onClick"],wo=["onClick"],Co={key:1},jo={class:"flex justify-between items-center mb-6"},qo={class:"text-sm text-gray-500"},Do={key:0,class:"bg-white rounded-xl border p-4 mb-6"},zo={key:1,class:"text-center py-12 text-gray-500"},$o={key:2,class:"space-y-3"},So={class:"flex items-center gap-3 flex-1 min-w-0"},Mo=["onClick"],Vo={class:"min-w-0"},Ro={class:"flex gap-2 text-xs text-gray-400"},No={key:0},Eo={key:1},To={class:"flex items-center gap-2 self-end sm:self-center"},Ao={key:0,class:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-medium"},Po=["onClick"],Uo=["onClick"],Fo={key:2},Bo={class:"mb-10"},Lo={class:"flex justify-between items-center mb-6"},Io={class:"text-sm text-gray-500"},Oo={key:0,class:"bg-white rounded-xl border p-5 mb-6"},Jo={class:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto"},Ho=["value"],Wo={class:"text-sm text-gray-700"},Yo={class:"flex gap-3"},Xo=["disabled"],Ko={key:1,class:"text-center py-8 text-gray-500 text-sm"},Qo={key:2,class:"space-y-4"},Go={class:"flex items-center justify-between mb-3"},Zo={class:"flex items-center gap-3"},en={class:"w-10 h-10 bg-violet-100 text-violet-700 rounded-lg flex items-center justify-center text-sm font-bold"},tn={class:"font-semibold text-gray-800"},sn={class:"text-xs text-gray-400"},on={class:"flex items-center gap-2"},nn=["onClick"],ln=["onClick"],an={class:"flex flex-wrap gap-2"},rn={class:"w-5 h-5 bg-violet-200 rounded-full flex items-center justify-center text-[10px] font-bold"},dn=["onClick"],un={key:0,class:"mt-3 pt-3 border-t"},mn={class:"flex flex-wrap gap-2"},cn=["onClick"],vn={key:0,class:"text-xs text-gray-400 italic"},xn={class:"mt-3 pt-3 border-t"},pn=["onClick"],bn={class:"text-[10px]"},fn={key:0},gn={key:0,class:"space-y-2 mb-3"},yn={class:"flex items-start justify-between gap-2"},_n={class:"min-w-0 flex-1"},hn={class:"text-sm text-gray-800"},kn={class:"text-[11px] text-gray-400 mt-1"},wn=["onClick"],Cn={key:1,class:"text-xs text-gray-400 mb-3"},jn=["onSubmit"],qn=["onUpdate:modelValue"],Dn=["disabled"],zn={key:3,class:"text-xs text-gray-400 italic"},$n={class:"text-sm text-gray-500 mb-6"},Sn={key:0,class:"text-center py-12 text-gray-500"},Mn={key:1,class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},Vn={class:"flex items-center gap-3 mb-3"},Rn={class:"font-medium text-gray-800"},Nn={key:0,class:"text-xs text-emerald-600"},En={class:"text-xs text-gray-500 space-y-1"},Tn={class:"relative bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto"},An={class:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between rounded-t-2xl z-10"},Pn={class:"text-lg font-semibold text-gray-900 capitalize"},Un={class:"text-xs text-emerald-600 font-medium"},Fn={class:"px-6 py-5 space-y-6"},Bn={class:"flex items-center justify-between"},Ln={key:0},In={class:"text-sm font-medium text-gray-700 mb-2"},On={class:"flex flex-wrap gap-1.5"},Jn={key:0,class:"text-xs bg-emerald-100 text-emerald-700 px-2.5 py-1 rounded-lg font-medium"},Hn={key:0,class:"space-y-2 mb-3"},Wn={class:"flex items-center gap-2 text-sm min-w-0"},Yn=["onClick"],Xn={class:"flex items-center gap-1.5 flex-shrink-0"},Kn={key:0,class:"text-[11px] bg-violet-100 text-violet-700 px-1.5 py-0.5 rounded"},Qn={key:1,class:"text-[11px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded"},Gn=["onClick"],Zn=["onClick"],el={key:1,class:"text-sm text-gray-400 mb-3"},tl=["disabled"],sl={key:1},ol={class:"space-y-1.5"},nl={key:0,class:"text-[11px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded ml-auto"},ll={key:0,class:"space-y-2.5 mb-4"},al={class:"flex items-start justify-between gap-2"},il={class:"min-w-0 flex-1"},rl={class:"text-sm text-gray-800"},dl={class:"text-[11px] text-gray-400 mt-1"},ul=["onClick"],ml={key:1,class:"text-sm text-gray-400 mb-4"},cl=["disabled"],wl={__name:"EspaceBenevole",setup(vl){const Le=$t(),De=p(!0),W=p(null),a=p(null),Y=U(()=>{var o;return["admin","superadmin"].includes((o=a.value)==null?void 0:o.role)}),ze=U(()=>{var o;return((o=a.value)==null?void 0:o.role)==="superadmin"}),L=p("benevole");let se=null;const Ie=[{titre:"Enseignement",desc:"Cours de Coran, langue arabe, soutien scolaire.",icon:Et},{titre:"Social & Entraide",desc:"Distribution alimentaire, aide aux familles.",icon:Mt},{titre:"Événements",desc:"Organisation, accueil des visiteurs, logistique.",icon:Ae},{titre:"Entretien & Travaux",desc:"Nettoyage, petits travaux, maintenance.",icon:Tt},{titre:"Communication",desc:"Réseaux sociaux, site web, graphisme.",icon:At},{titre:"Cuisine Ramadan",desc:"Préparation des repas d'iftar.",icon:Pt}];wt(async()=>{const{data:{session:o}}=await m.auth.getSession();if(W.value=o,o){const e=_e(),{data:r}=await m.from("benevoles").select("*").eq("email",o.user.email).eq("statut","accepté").single();r&&(a.value=r,await e)}De.value=!1,o&&!a.value&&(se=setInterval(async()=>{var r,t;if(a.value){clearInterval(se);return}const{data:e}=await m.from("benevoles").select("*").eq("email",(t=(r=W.value)==null?void 0:r.user)==null?void 0:t.email).eq("statut","accepté").single();e&&(a.value=e,clearInterval(se),await _e())},3e4)),m.auth.onAuthStateChange(async(e,r)=>{if(W.value=r,r){const t=_e(),{data:u}=await m.from("benevoles").select("*").eq("email",r.user.email).eq("statut","accepté").single();u?(a.value=u,await t):a.value=null}else a.value=null})}),Ct(()=>{se&&clearInterval(se)});const $e=async()=>{await m.auth.signOut(),W.value=null,a.value=null,Le.push("/")},I=U(()=>a.value?`${a.value.prenom} ${a.value.nom}`:""),X=p(!1),de=p(!1),_=p({disponible:!0,dispo_debut:"",dispo_fin:"",dispo_motif:""}),Oe=()=>{_.value={disponible:a.value.disponible!==!1,dispo_debut:a.value.dispo_debut||"",dispo_fin:a.value.dispo_fin||"",dispo_motif:a.value.dispo_motif||""},X.value=!0},Je=async()=>{de.value=!0;const o={disponible:_.value.disponible,dispo_debut:_.value.dispo_debut||null,dispo_fin:_.value.dispo_fin||null,dispo_motif:_.value.dispo_motif||null};await m.from("benevoles").update(o).eq("id",a.value.id),a.value.disponible=o.disponible,a.value.dispo_debut=o.dispo_debut,a.value.dispo_fin=o.dispo_fin,a.value.dispo_motif=o.dispo_motif;let e=`${I.value} est maintenant `;o.disponible?e+="disponible":e+="indisponible",o.dispo_debut||o.dispo_fin?(e+=" du "+(o.dispo_debut?Q(o.dispo_debut):"?"),e+=" au "+(o.dispo_fin?Q(o.dispo_fin):"?")):e+=" (indéfini)",o.dispo_motif&&(e+=` — ${o.dispo_motif}`),e+=".",await m.from("notifications").insert({type:"disponibilite",message:e,benevole_id:a.value.id}),de.value=!1,X.value=!1},K=p("planning"),M=p("taches"),ue=p(!0),V=p([]),R=p([]),k=p([]),A=p([]),P=p([]),ge=[],He=new Date(2026,1,18);for(let o=0;o<30;o++){const e=new Date(He);e.setDate(e.getDate()+o),ge.push(e)}const w=o=>{const e=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),t=String(o.getDate()).padStart(2,"0");return`${e}-${r}-${t}`},We=o=>o.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),Q=o=>o?new Date(o+"T00:00:00").toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"",Ye=new Set(ge.map(o=>w(o))),Xe=o=>Ye.has(w(o)),Se=o=>{const e=w(o),r=ge.findIndex(t=>w(t)===e);return r>=0?r+1:0},G=p(1),ye=new Date,Ke=U(()=>{const o=[],r=G.value===1?1:2;let u=new Date(2026,r,1).getDay()-1;u<0&&(u=6);const v=new Date(2026,r+1,0).getDate();for(let C=0;C<u;C++)o.push({date:null,isRamadan:!1,isToday:!1});for(let C=1;C<=v;C++){const T=new Date(2026,r,C),be=T.getDate()===ye.getDate()&&T.getMonth()===ye.getMonth()&&T.getFullYear()===ye.getFullYear();o.push({date:T,isRamadan:Xe(T),ramadanDay:Se(T),isToday:be})}const $=o.length%7;if($>0)for(let C=0;C<7-$;C++)o.push({date:null,isRamadan:!1,isToday:!1});return o}),g=p(null),O=p(""),Z=p(""),Qe=async()=>{if(!Z.value.trim()||!g.value)return;const o=w(g.value),e={id:Date.now(),nom:Z.value.trim(),jour:o,benevole_id:null,fait:!1,created_by:a.value.id};k.value.push(e),Z.value="";const{data:r}=await m.from("ramadan_taches").insert({nom:e.nom,jour:e.jour,created_by:a.value.id}).select();if(r&&r[0]){const t=k.value.findIndex(u=>u.id===e.id);t!==-1&&(k.value[t]=r[0])}},Ge=o=>{g.value=o,O.value=""},_e=async()=>{ue.value=!0;const[o,e,r,t,u,v,$,C]=await Promise.all([m.from("ramadan_presences").select("*"),m.from("benevoles").select("id, prenom, nom").eq("statut","accepté"),m.from("ramadan_taches").select("*"),m.from("ramadan_produits").select("*").order("created_at"),m.from("ramadan_notes").select("*").order("created_at"),m.from("equipes").select("*").order("created_at"),m.from("equipe_membres").select("*"),m.from("equipe_notes").select("*").order("created_at")]);V.value=o.data||[],R.value=e.data||[],k.value=r.data||[],A.value=t.data||[],P.value=u.data||[],N.value=v.data||[],E.value=$.data||[],J.value=C.data||[],ue.value=!1},ee=o=>V.value.some(e=>e.benevole_id===a.value.id&&e.jour===w(o)),Ze=U(()=>V.value.filter(o=>{var e;return o.benevole_id===((e=a.value)==null?void 0:e.id)}).length),me=o=>V.value.filter(e=>e.jour===w(o)).length,et=o=>V.value.filter(r=>r.jour===w(o)&&r.benevole_id!==a.value.id).map(r=>r.benevole_id).map(r=>{const t=R.value.find(u=>u.id===r);return t?`${t.prenom} ${t.nom}`:"Inconnu"}),tt=async o=>{const e=w(o),r=ee(o);r?V.value=V.value.filter(t=>!(t.benevole_id===a.value.id&&t.jour===e)):V.value.push({benevole_id:a.value.id,jour:e}),r?await m.from("ramadan_presences").delete().eq("benevole_id",a.value.id).eq("jour",e):await m.from("ramadan_presences").insert({benevole_id:a.value.id,jour:e})},oe=o=>k.value.filter(e=>e.jour===w(o)),st=U(()=>[...k.value].sort((o,e)=>o.fait!==e.fait?o.fait?1:-1:o.jour<e.jour?-1:1)),ot=U(()=>k.value.filter(o=>!o.fait).length),ce=p(!1),q=p({nom:"",jour:"",equipe_id:""}),nt=async()=>{if(!q.value.nom.trim()||!q.value.jour)return;const o={id:Date.now(),nom:q.value.nom.trim(),jour:q.value.jour,benevole_id:null,equipe_id:q.value.equipe_id||null,fait:!1,created_by:a.value.id};k.value.push(o),q.value={nom:"",jour:"",equipe_id:""},ce.value=!1;const e={nom:o.nom,jour:o.jour,created_by:a.value.id};o.equipe_id&&(e.equipe_id=o.equipe_id);const{data:r}=await m.from("ramadan_taches").insert(e).select();if(r&&r[0]){const t=k.value.findIndex(u=>u.id===o.id);t!==-1&&(k.value[t]=r[0])}},Me=async o=>{o.fait=!o.fait,o.fait?(o.benevole_id=a.value.id,await m.from("ramadan_taches").update({fait:!0,benevole_id:a.value.id}).eq("id",o.id)):(o.benevole_id=null,await m.from("ramadan_taches").update({fait:!1,benevole_id:null}).eq("id",o.id))},Ve=async o=>{o.benevole_id=a.value.id,await m.from("ramadan_taches").update({benevole_id:a.value.id}).eq("id",o.id)},lt=async o=>{o.benevole_id=null,await m.from("ramadan_taches").update({benevole_id:null}).eq("id",o.id)},Re=async o=>{k.value=k.value.filter(e=>e.id!==o),await m.from("ramadan_taches").delete().eq("id",o)},ve=o=>{if(!o)return null;const e=R.value.find(r=>r.id===o);return e?`${e.prenom} ${e.nom}`:null},Ne=o=>P.value.filter(e=>e.jour===w(o)),he=o=>P.value.filter(e=>e.jour===w(o)).length,Ee=o=>{if(!o)return"";const e=new Date(o);return e.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})+" à "+e.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})},at=async()=>{if(!O.value.trim()||!g.value)return;const o=w(g.value),e={id:Date.now(),jour:o,contenu:O.value.trim(),auteur_nom:I.value,benevole_id:a.value.id,created_at:new Date().toISOString()};P.value.push(e),O.value="";const{data:r}=await m.from("ramadan_notes").insert({jour:o,contenu:e.contenu,auteur_nom:e.auteur_nom,benevole_id:a.value.id}).select();if(r&&r[0]){const t=P.value.findIndex(u=>u.id===e.id);t!==-1&&(P.value[t]=r[0])}},it=async o=>{P.value=P.value.filter(e=>e.id!==o),await m.from("ramadan_notes").delete().eq("id",o)},xe=p(!1),S=p({nom:"",quantite:"",jour:""}),rt=U(()=>A.value.filter(o=>!o.en_stock).length),ne=o=>A.value.filter(e=>e.jour===w(o)),dt=async()=>{const o={id:Date.now(),nom:S.value.nom,quantite:S.value.quantite||null,jour:S.value.jour||null,en_stock:!1,responsable_nom:null};A.value.push(o),S.value={nom:"",quantite:"",jour:""},xe.value=!1;const{data:e}=await m.from("ramadan_produits").insert({nom:o.nom,quantite:o.quantite,jour:o.jour}).select();if(e&&e[0]){const r=A.value.findIndex(t=>t.id===o.id);r!==-1&&(A.value[r]=e[0])}},ut=async o=>{o.en_stock=!o.en_stock,await m.from("ramadan_produits").update({en_stock:o.en_stock}).eq("id",o.id)},mt=async o=>{o.responsable_nom=I.value,await m.from("ramadan_produits").update({responsable_nom:I.value}).eq("id",o.id)},ct=async o=>{o.responsable_nom=null,await m.from("ramadan_produits").update({responsable_nom:null}).eq("id",o.id)},N=p([]),E=p([]),te=p(!1),le=p(null),z=p({nom:"",membres:[]}),ke=o=>E.value.filter(e=>e.equipe_id===o),we=o=>R.value.find(e=>e.id===o)||null,pe=o=>{if(!o)return null;const e=N.value.find(r=>r.id===o);return e?e.nom:null},Te=o=>{const e=ke(o).map(r=>r.benevole_id);return R.value.filter(r=>!e.includes(r.id))},vt=async()=>{if(!z.value.nom.trim()||z.value.membres.length===0)return;const{data:o}=await m.from("equipes").insert({nom:z.value.nom.trim(),created_by:a.value.id}).select();if(!o||!o[0])return;const e=o[0];N.value.push(e);const t=[a.value.id,...z.value.membres].map(v=>({equipe_id:e.id,benevole_id:v})),{data:u}=await m.from("equipe_membres").insert(t).select();u&&E.value.push(...u),z.value={nom:"",membres:[]},te.value=!1},xt=async(o,e)=>{const{data:r}=await m.from("equipe_membres").insert({equipe_id:o,benevole_id:e}).select();r&&r[0]&&E.value.push(r[0])},pt=async(o,e)=>{E.value=E.value.filter(r=>r.id!==e),await m.from("equipe_membres").delete().eq("id",e)},bt=async o=>{confirm("Supprimer cette équipe ?")&&(N.value=N.value.filter(e=>e.id!==o),E.value=E.value.filter(e=>e.equipe_id!==o),await m.from("equipes").delete().eq("id",o))},J=p([]),ae=p([]),ie=p({}),ft=o=>{const e=ae.value.indexOf(o);e>=0?ae.value.splice(e,1):ae.value.push(o)},Ce=o=>J.value.filter(e=>e.equipe_id===o),gt=o=>E.value.some(e=>e.equipe_id===o&&e.benevole_id===a.value.id),yt=async o=>{var u;const e=(u=ie.value[o])==null?void 0:u.trim();if(!e)return;const r={id:Date.now(),equipe_id:o,contenu:e,auteur_nom:I.value,benevole_id:a.value.id,created_at:new Date().toISOString()};J.value.push(r),ie.value[o]="";const{data:t}=await m.from("equipe_notes").insert({equipe_id:o,contenu:r.contenu,auteur_nom:r.auteur_nom,benevole_id:a.value.id}).select();if(t&&t[0]){const v=J.value.findIndex($=>$.id===r.id);v!==-1&&(J.value[v]=t[0])}},_t=async o=>{J.value=J.value.filter(e=>e.id!==o),await m.from("equipe_notes").delete().eq("id",o)},ht=o=>V.value.filter(e=>e.benevole_id===o).length,kt=o=>k.value.filter(e=>e.benevole_id===o).length;return(o,e)=>{const r=jt("router-link");return n(),l("div",Jt,[De.value?(n(),l("div",Ht,[...e[35]||(e[35]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):W.value?a.value?(n(),l("div",ns,[s("div",ls,[s("div",as,[s("div",is,[c(x(Pe),{size:24,class:"text-emerald-400"}),s("div",null,[s("h1",rs,i(a.value.prenom)+" "+i(a.value.nom),1),s("p",ds,i(a.value.domaine),1)])]),s("div",us,[ze.value?(n(),l("button",{key:0,onClick:e[0]||(e[0]=t=>L.value=L.value==="benevole"?"visiteur":"benevole"),class:f(["flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg transition-colors",L.value==="visiteur"?"bg-amber-500 text-white":"bg-white/10 text-gray-300 hover:text-white"])},[c(x(Be),{size:14}),b(" "+i(L.value==="visiteur"?"Vue visiteur":"Vue bénévole"),1)],2)):d("",!0),c(r,{to:"/",class:"text-gray-400 hover:text-white transition-colors text-xs sm:text-sm"},{default:H(()=>[...e[52]||(e[52]=[b(" Voir le site ",-1)])]),_:1}),s("button",{onClick:$e,class:"text-gray-400 hover:text-white transition-colors flex items-center gap-1 text-xs sm:text-sm"},[c(x(qt),{size:16}),e[53]||(e[53]=s("span",{class:"hidden sm:inline"},"Déconnexion",-1))])])])]),s("div",ms,[s("div",{class:f(["rounded-xl border p-4 sm:p-5",a.value.disponible!==!1?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"])},[s("div",cs,[s("div",vs,[s("div",{class:f(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",a.value.disponible!==!1?"bg-emerald-100":"bg-red-100"])},[a.value.disponible!==!1?(n(),je(x(Ue),{key:0,size:20,class:"text-emerald-600"})):(n(),je(x(Fe),{key:1,size:20,class:"text-red-600"}))],2),s("div",null,[s("p",{class:f(["font-semibold",a.value.disponible!==!1?"text-emerald-800":"text-red-800"])},i(a.value.disponible!==!1?"Vous êtes disponible":"Vous êtes indisponible"),3),a.value.dispo_debut||a.value.dispo_fin?(n(),l("p",{key:0,class:f(["text-xs",a.value.disponible!==!1?"text-emerald-600":"text-red-600"])},i(a.value.dispo_debut?"Du "+Q(a.value.dispo_debut):"")+" "+i(a.value.dispo_fin?" au "+Q(a.value.dispo_fin):""),3)):(n(),l("p",{key:1,class:f(["text-xs",a.value.disponible!==!1?"text-emerald-600":"text-red-600"])}," Indéfini ",2)),a.value.dispo_motif?(n(),l("p",{key:2,class:f(["text-xs italic mt-0.5",a.value.disponible!==!1?"text-emerald-500":"text-red-500"])},i(a.value.dispo_motif),3)):d("",!0)])]),s("button",{onClick:e[1]||(e[1]=t=>Oe()),class:f(["px-4 py-2 rounded-xl text-sm font-medium transition-colors",a.value.disponible!==!1?"bg-white text-emerald-700 border border-emerald-300 hover:bg-emerald-100":"bg-white text-red-700 border border-red-300 hover:bg-red-100"])}," Modifier ma disponibilité ",2)])],2)]),X.value?(n(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e[9]||(e[9]=F(t=>X.value=!1,["self"]))},[s("div",{class:"absolute inset-0 bg-black/40",onClick:e[2]||(e[2]=t=>X.value=!1)}),s("div",xs,[s("div",ps,[e[54]||(e[54]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Ma disponibilité",-1)),s("button",{onClick:e[3]||(e[3]=t=>X.value=!1),class:"text-gray-400 hover:text-gray-600 p-1"},[c(x(B),{size:20})])]),s("div",bs,[s("div",fs,[s("button",{onClick:e[4]||(e[4]=t=>_.value.disponible=!0),class:f([_.value.disponible?"bg-emerald-600 text-white ring-2 ring-emerald-300":"bg-gray-100 text-gray-600 hover:bg-gray-200","flex-1 py-3 rounded-xl font-medium text-sm transition-all flex items-center justify-center gap-2"])},[c(x(Ue),{size:18}),e[55]||(e[55]=b(" Disponible ",-1))],2),s("button",{onClick:e[5]||(e[5]=t=>_.value.disponible=!1),class:f([_.value.disponible?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-red-600 text-white ring-2 ring-red-300","flex-1 py-3 rounded-xl font-medium text-sm transition-all flex items-center justify-center gap-2"])},[c(x(Fe),{size:18}),e[56]||(e[56]=b(" Indisponible ",-1))],2)]),s("div",gs,[s("p",ys,i(_.value.disponible?"Précisez vos dates de disponibilité ou laissez vide pour indéfini.":"Précisez vos dates d'indisponibilité ou laissez vide pour indéfini."),1),s("div",_s,[s("div",null,[e[57]||(e[57]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Du (optionnel)",-1)),j(s("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>_.value.dispo_debut=t),type:"date",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,_.value.dispo_debut]])]),s("div",null,[e[58]||(e[58]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Au (optionnel)",-1)),j(s("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>_.value.dispo_fin=t),type:"date",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,_.value.dispo_fin]])])]),s("div",null,[e[59]||(e[59]=s("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Commentaire (optionnel)",-1)),j(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>_.value.dispo_motif=t),type:"text",placeholder:_.value.disponible?"Ex: Tous les week-ends, après 18h...":"Ex: Voyage, maladie, travail...",class:"w-full px-3 py-2 border rounded-xl text-sm focus:outline-none focus:border-emerald-600"},null,8,hs),[[D,_.value.dispo_motif]])])]),s("button",{onClick:Je,disabled:de.value,class:"w-full bg-emerald-600 text-white py-3 rounded-xl font-medium hover:bg-emerald-700 transition-colors disabled:opacity-50"},i(de.value?"Enregistrement...":"Enregistrer"),9,ks)])])])):d("",!0),L.value==="visiteur"?(n(),l("div",ws,[s("div",Cs,[c(x(Be),{size:18,class:"text-amber-600 flex-shrink-0"}),e[60]||(e[60]=s("p",{class:"text-sm text-amber-800"},[b("Vous voyez la page telle qu'un "),s("strong",null,"visiteur non-bénévole"),b(' la voit. Cliquez sur "Vue bénévole" pour revenir.')],-1))]),e[61]||(e[61]=s("h2",{class:"text-2xl font-semibold text-gray-900 mb-8 text-center"},"Nos domaines de bénévolat",-1)),s("div",js,[(n(),l(y,null,h(Ie,t=>s("div",{key:t.titre,class:"bg-white rounded-xl p-6 shadow-sm border"},[s("div",qs,[(n(),je(St(t.icon),{size:24,class:"text-emerald-600"}))]),s("h3",Ds,i(t.titre),1),s("p",zs,i(t.desc),1)])),64))]),e[62]||(e[62]=s("div",{class:"max-w-2xl mx-auto text-center"},[s("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Formulaire de candidature"),s("p",{class:"text-gray-500 text-sm mb-6"},"Les visiteurs voient ici le formulaire pour envoyer leur candidature bénévole."),s("div",{class:"bg-gray-100 rounded-xl p-8 text-gray-400 text-sm italic"}," Formulaire de candidature (prénom, nom, email, téléphone, domaine, message) ")],-1))])):d("",!0),L.value==="benevole"?(n(),l("div",$s,[s("div",Ss,[s("button",{onClick:e[10]||(e[10]=t=>K.value="planning"),class:f([K.value==="planning"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"])},[c(x(Ae),{size:18}),e[63]||(e[63]=b(" Planning ",-1))],2),s("button",{onClick:e[11]||(e[11]=t=>K.value="organisation"),class:f([K.value==="organisation"?"border-emerald-600 text-emerald-700":"border-transparent text-gray-500 hover:text-gray-700","flex-1 sm:flex-none px-4 sm:px-6 py-4 border-b-2 font-medium transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"])},[c(x(Bt),{size:18}),e[64]||(e[64]=b(" Organisation ",-1))],2)])])):d("",!0),L.value==="benevole"?(n(),l("div",Ms,[K.value==="planning"?(n(),l("div",Vs,[s("div",Rs,[e[65]||(e[65]=s("div",null,[s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Ramadan 2026"),s("p",{class:"text-sm text-gray-500"},"18 février - 19 mars")],-1)),s("span",Ns," Vous : "+i(Ze.value)+" / 30 jours ",1)]),ue.value?(n(),l("div",Es,[...e[66]||(e[66]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):(n(),l("div",Ts,[s("div",As,[s("button",{onClick:e[12]||(e[12]=t=>G.value=1),class:f([G.value===1?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors flex items-center gap-2"])},[c(x(qe),{size:16}),e[67]||(e[67]=b(" Février ",-1))],2),s("span",Ps,i(G.value===1?"Février 2026":"Mars 2026"),1),s("button",{onClick:e[13]||(e[13]=t=>G.value=2),class:f([G.value===2?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors flex items-center gap-2"])},[e[68]||(e[68]=b(" Mars ",-1)),c(x(Ft),{size:16})],2)]),s("div",Us,[s("div",Fs,[(n(),l(y,null,h(["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],t=>s("div",{key:t,class:"py-3 text-center text-xs font-semibold text-gray-500 uppercase"},i(t),1)),64))]),s("div",Bs,[(n(!0),l(y,null,h(Ke.value,(t,u)=>(n(),l("div",{key:u,onClick:v=>t.isRamadan?Ge(t.date):null,class:f(["min-h-[80px] sm:min-h-[100px] border-b border-r p-1.5 sm:p-2 relative",[t.isRamadan?"cursor-pointer hover:bg-emerald-50/50 transition-colors":"",t.date?"":"bg-gray-50/50",t.isRamadan&&ee(t.date)?"bg-emerald-50/40":"",t.isToday?"ring-2 ring-inset ring-emerald-500":""]])},[t.date?(n(),l(y,{key:0},[s("div",Is,[s("span",{class:f(["text-sm font-medium",t.isRamadan?"text-gray-800":"text-gray-300"])},i(t.date.getDate()),3),t.isRamadan?(n(),l("span",Os," J"+i(t.ramadanDay),1)):d("",!0)]),t.isRamadan?(n(),l(y,{key:0},[s("div",Js,[ee(t.date)?(n(),l("span",Hs)):d("",!0),me(t.date)>0?(n(),l("span",Ws,i(me(t.date)),1)):d("",!0)]),he(t.date)>0?(n(),l("div",Ys,[s("span",Xs,i(he(t.date))+" note"+i(he(t.date)>1?"s":""),1)])):d("",!0),oe(t.date).length>0?(n(),l("div",Ks,[s("span",Qs,i(oe(t.date).length)+" tâche"+i(oe(t.date).length>1?"s":""),1)])):d("",!0),ne(t.date).length>0?(n(),l("div",Gs,[s("span",Zs,i(ne(t.date).length)+" course"+i(ne(t.date).length>1?"s":""),1)])):d("",!0)],64)):d("",!0)],64)):d("",!0)],10,Ls))),128))])]),e[69]||(e[69]=Dt('<div class="flex flex-wrap gap-4 mt-4 text-xs text-gray-500"><div class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-emerald-500 inline-block"></span> Vous êtes présent </div><div class="flex items-center gap-1.5"><span class="bg-amber-100 text-amber-700 px-1 rounded text-[10px]">1</span> Notes </div><div class="flex items-center gap-1.5"><span class="bg-blue-100 text-blue-700 px-1 rounded text-[10px]">1</span> Tâches </div><div class="flex items-center gap-1.5"><span class="bg-orange-100 text-orange-700 px-1 rounded text-[10px]">1</span> Courses </div><div class="flex items-center gap-1.5"><span class="ring-2 ring-emerald-500 w-4 h-3 inline-block rounded-sm"></span> Aujourd&#39;hui </div></div>',1))]))])):d("",!0),K.value==="organisation"?(n(),l("div",eo,[s("div",to,[s("button",{onClick:e[14]||(e[14]=t=>M.value="taches"),class:f([M.value==="taches"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(x(Lt),{size:16}),e[70]||(e[70]=b(" Tâches ",-1))],2),s("button",{onClick:e[15]||(e[15]=t=>M.value="courses"),class:f([M.value==="courses"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(x(Ot),{size:16}),e[71]||(e[71]=b(" Courses ",-1))],2),s("button",{onClick:e[16]||(e[16]=t=>M.value="equipe"),class:f([M.value==="equipe"?"bg-emerald-600 text-white":"bg-white text-gray-700 border hover:bg-gray-50","px-4 py-2 rounded-xl text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2"])},[c(x(Nt),{size:16}),e[72]||(e[72]=b(" Équipe ",-1))],2)]),ue.value?(n(),l("div",so,[...e[73]||(e[73]=[s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-emerald-600"},null,-1)])])):(n(),l(y,{key:1},[M.value==="taches"?(n(),l("div",oo,[s("div",no,[s("div",null,[e[74]||(e[74]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Tâches à faire",-1)),s("p",lo,i(ot.value)+" tâche(s) restante(s)",1)]),s("button",{onClick:e[17]||(e[17]=t=>ce.value=!ce.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(x(fe),{size:16}),e[75]||(e[75]=b(" Ajouter ",-1))])]),ce.value?(n(),l("div",ao,[s("form",{onSubmit:F(nt,["prevent"]),class:"space-y-3"},[s("div",io,[j(s("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>q.value.nom=t),required:"",placeholder:"Nom de la tâche",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,q.value.nom]]),j(s("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>q.value.jour=t),type:"date",required:"",min:"2026-02-18",max:"2026-03-19",class:"sm:w-44 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,q.value.jour]])]),s("div",ro,[s("div",uo,[e[77]||(e[77]=s("label",{class:"block text-xs text-gray-500 mb-1"},"Assigner à une équipe (optionnel)",-1)),j(s("select",{"onUpdate:modelValue":e[20]||(e[20]=t=>q.value.equipe_id=t),class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},[e[76]||(e[76]=s("option",{value:""},"Aucune équipe",-1)),(n(!0),l(y,null,h(N.value,t=>(n(),l("option",{key:t.id,value:t.id},i(t.nom),9,mo))),128))],512),[[zt,q.value.equipe_id]])]),e[78]||(e[78]=s("button",{type:"submit",class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium"}," Ajouter ",-1))])],32)])):d("",!0),k.value.length===0?(n(),l("div",co," Aucune tâche pour le moment. ")):(n(),l("div",vo,[(n(!0),l(y,null,h(st.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4 flex flex-col sm:flex-row sm:items-center gap-3"},[s("div",xo,[s("button",{onClick:u=>Me(t),class:f([t.fait?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-400","w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors text-sm font-bold"])},i(t.fait?"✓":""),11,po),s("div",bo,[s("p",{class:f(["font-medium",t.fait?"line-through text-gray-400":"text-gray-800"])},i(t.nom),3),s("p",fo,i(Q(t.jour)),1)])]),s("div",go,[pe(t.equipe_id)?(n(),l("span",yo,i(pe(t.equipe_id)),1)):d("",!0),ve(t.benevole_id)?(n(),l("span",_o,i(ve(t.benevole_id)),1)):d("",!0),!t.benevole_id&&!t.equipe_id?(n(),l("button",{key:2,onClick:u=>Ve(t),class:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-colors font-medium"}," Je m'en charge ",8,ho)):t.benevole_id===a.value.id?(n(),l("button",{key:3,onClick:u=>lt(t),class:"text-xs text-gray-400 hover:text-red-600 transition-colors"}," Annuler ",8,ko)):d("",!0),Y.value||t.created_by===a.value.id?(n(),l("button",{key:4,onClick:u=>Re(t.id),class:"text-gray-300 hover:text-red-500 transition-colors p-0.5"},[c(x(B),{size:14})],8,wo)):d("",!0)])]))),128))]))])):d("",!0),M.value==="courses"?(n(),l("div",Co,[s("div",jo,[s("div",null,[e[79]||(e[79]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Liste des courses",-1)),s("p",qo,i(rt.value)+" produit(s) manquant(s)",1)]),s("button",{onClick:e[21]||(e[21]=t=>xe.value=!xe.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(x(fe),{size:16}),e[80]||(e[80]=b(" Ajouter ",-1))])]),xe.value?(n(),l("div",Do,[s("form",{onSubmit:F(dt,["prevent"]),class:"flex flex-col sm:flex-row gap-3"},[j(s("input",{"onUpdate:modelValue":e[22]||(e[22]=t=>S.value.nom=t),required:"",placeholder:"Nom du produit",class:"flex-1 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,S.value.nom]]),j(s("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>S.value.quantite=t),placeholder:"Quantité (ex: 5 kg)",class:"sm:w-40 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,S.value.quantite]]),j(s("input",{"onUpdate:modelValue":e[24]||(e[24]=t=>S.value.jour=t),type:"date",min:"2026-02-18",max:"2026-03-19",placeholder:"Jour (optionnel)",class:"sm:w-44 px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,S.value.jour]]),e[81]||(e[81]=s("button",{type:"submit",class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium"}," Ajouter ",-1))],32)])):d("",!0),A.value.length===0?(n(),l("div",zo," Aucun produit dans la liste pour le moment. ")):(n(),l("div",$o,[(n(!0),l(y,null,h(A.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4 flex flex-col sm:flex-row sm:items-center gap-3"},[s("div",So,[s("button",{onClick:u=>ut(t),class:f([t.en_stock?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600","w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors text-sm font-bold"])},i(t.en_stock?"✓":"✗"),11,Mo),s("div",Vo,[s("p",{class:f(["font-medium",t.en_stock?"line-through text-gray-400":"text-gray-800"])},i(t.nom),3),s("div",Ro,[t.quantite?(n(),l("span",No,i(t.quantite),1)):d("",!0),t.jour?(n(),l("span",Eo,i(Q(t.jour)),1)):d("",!0)])])]),s("div",To,[t.responsable_nom?(n(),l("span",Ao,i(t.responsable_nom),1)):d("",!0),t.responsable_nom?t.responsable_nom===I.value?(n(),l("button",{key:2,onClick:u=>ct(t),class:"text-xs text-gray-400 hover:text-red-600 transition-colors"}," Annuler ",8,Uo)):d("",!0):(n(),l("button",{key:1,onClick:u=>mt(t),class:"text-xs bg-emerald-50 text-emerald-700 px-3 py-1.5 rounded-lg hover:bg-emerald-100 transition-colors font-medium"}," Je m'en charge ",8,Po))])]))),128))]))])):d("",!0),M.value==="equipe"?(n(),l("div",Fo,[s("div",Bo,[s("div",Lo,[s("div",null,[e[82]||(e[82]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800"},"Équipes",-1)),s("p",Io,i(N.value.length)+" équipe(s) créée(s)",1)]),s("button",{onClick:e[25]||(e[25]=t=>te.value=!te.value),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm flex items-center gap-2"},[c(x(fe),{size:16}),e[83]||(e[83]=b(" Créer une équipe ",-1))])]),te.value?(n(),l("div",Oo,[s("form",{onSubmit:F(vt,["prevent"]),class:"space-y-4"},[s("div",null,[e[84]||(e[84]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de l'équipe *",-1)),j(s("input",{"onUpdate:modelValue":e[26]||(e[26]=t=>z.value.nom=t),required:"",placeholder:"Ex: Équipe Cuisine, Équipe Service...",class:"w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-emerald-600 text-sm"},null,512),[[D,z.value.nom]])]),s("div",null,[e[85]||(e[85]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Membres *",-1)),s("div",Jo,[(n(!0),l(y,null,h(R.value.filter(t=>t.id!==a.value.id),t=>(n(),l("label",{key:t.id,class:"flex items-center gap-2 bg-gray-50 rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-100 transition-colors"},[j(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[27]||(e[27]=u=>z.value.membres=u),class:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,8,Ho),[[Vt,z.value.membres]]),s("span",Wo,i(t.prenom)+" "+i(t.nom),1)]))),128))]),e[86]||(e[86]=s("p",{class:"text-xs text-gray-400 mt-1"},"Vous serez automatiquement ajouté à l'équipe.",-1))]),s("div",Yo,[s("button",{type:"submit",disabled:!z.value.nom.trim()||z.value.membres.length===0,class:"bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 text-sm font-medium disabled:opacity-50"}," Créer ",8,Xo),s("button",{type:"button",onClick:e[28]||(e[28]=t=>te.value=!1),class:"text-gray-500 hover:text-gray-700 text-sm"}," Annuler ")])],32)])):d("",!0),N.value.length===0&&!te.value?(n(),l("div",Ko," Aucune équipe pour le moment. Créez-en une ! ")):(n(),l("div",Qo,[(n(!0),l(y,null,h(N.value,t=>{var u;return n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4"},[s("div",Go,[s("div",Zo,[s("div",en,i(t.nom.substring(0,2).toUpperCase()),1),s("div",null,[s("p",tn,i(t.nom),1),s("p",sn,i(ke(t.id).length)+" membre(s)",1)])]),s("div",on,[t.created_by===a.value.id||Y.value?(n(),l("button",{key:0,onClick:v=>le.value=le.value===t.id?null:t.id,class:"text-xs text-gray-400 hover:text-emerald-600 transition-colors px-2 py-1"},i(le.value===t.id?"Fermer":"Modifier"),9,nn)):d("",!0),t.created_by===a.value.id||ze.value?(n(),l("button",{key:1,onClick:v=>bt(t.id),class:"text-gray-300 hover:text-red-500 transition-colors p-1"},[c(x(B),{size:14})],8,ln)):d("",!0)])]),s("div",an,[(n(!0),l(y,null,h(ke(t.id),v=>{var $,C,T,be;return n(),l("span",{key:v.id,class:"inline-flex items-center gap-1.5 text-xs bg-violet-50 text-violet-700 px-2.5 py-1 rounded-lg font-medium"},[s("span",rn,i(((C=($=we(v.benevole_id))==null?void 0:$.prenom)==null?void 0:C[0])||"?"),1),b(" "+i((T=we(v.benevole_id))==null?void 0:T.prenom)+" "+i((be=we(v.benevole_id))==null?void 0:be.nom)+" ",1),(t.created_by===a.value.id||Y.value)&&le.value===t.id&&v.benevole_id!==a.value.id?(n(),l("button",{key:0,onClick:xl=>pt(t.id,v.id),class:"text-violet-400 hover:text-red-500 transition-colors ml-0.5"},[c(x(B),{size:12})],8,dn)):d("",!0)])}),128))]),le.value===t.id?(n(),l("div",un,[e[87]||(e[87]=s("p",{class:"text-xs text-gray-500 mb-2"},"Ajouter un membre :",-1)),s("div",mn,[(n(!0),l(y,null,h(Te(t.id),v=>(n(),l("button",{key:v.id,onClick:$=>xt(t.id,v.id),class:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded-lg hover:bg-emerald-50 hover:text-emerald-700 transition-colors"}," + "+i(v.prenom)+" "+i(v.nom),9,cn))),128)),Te(t.id).length===0?(n(),l("span",vn," Tous les bénévoles sont déjà dans l'équipe ")):d("",!0)])])):d("",!0),s("div",xn,[s("button",{onClick:v=>ft(t.id),class:"flex items-center gap-2 text-xs text-gray-500 hover:text-gray-700 transition-colors mb-2"},[c(x(It),{size:14}),s("span",null,i(Ce(t.id).length)+" commentaire(s)",1),s("span",bn,i(ae.value.includes(t.id)?"▲":"▼"),1)],8,pn),ae.value.includes(t.id)?(n(),l("div",fn,[Ce(t.id).length>0?(n(),l("div",gn,[(n(!0),l(y,null,h(Ce(t.id),v=>(n(),l("div",{key:v.id,class:"bg-gray-50 rounded-lg px-3 py-2"},[s("div",yn,[s("div",_n,[s("p",hn,i(v.contenu),1),s("p",kn,i(v.auteur_nom)+" · "+i(Ee(v.created_at)),1)]),Y.value||v.benevole_id===a.value.id||t.created_by===a.value.id?(n(),l("button",{key:0,onClick:$=>_t(v.id),class:"text-gray-300 hover:text-red-500 transition-colors flex-shrink-0 p-0.5"},[c(x(B),{size:12})],8,wn)):d("",!0)])]))),128))])):(n(),l("p",Cn,"Aucun commentaire pour le moment.")),gt(t.id)?(n(),l("form",{key:2,onSubmit:F(v=>yt(t.id),["prevent"]),class:"flex gap-2"},[j(s("input",{"onUpdate:modelValue":v=>ie.value[t.id]=v,placeholder:"Objectif, note, commentaire...",class:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:border-emerald-600"},null,8,qn),[[D,ie.value[t.id]]]),s("button",{type:"submit",disabled:!((u=ie.value[t.id])!=null&&u.trim()),class:"bg-emerald-600 text-white px-3 py-2 rounded-lg hover:bg-emerald-700 text-sm disabled:opacity-40"},[c(x(Ut),{size:14})],8,Dn)],40,jn)):(n(),l("p",zn,"Rejoignez l'équipe pour commenter."))])):d("",!0)])])}),128))]))]),s("div",null,[e[88]||(e[88]=s("h2",{class:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2"},"Tous les bénévoles",-1)),s("p",$n,i(R.value.length)+" bénévole(s) accepté(s)",1),R.value.length===0?(n(),l("div",Sn," Aucun bénévole accepté pour le moment. ")):(n(),l("div",Mn,[(n(!0),l(y,null,h(R.value,t=>(n(),l("div",{key:t.id,class:"bg-white rounded-xl border p-4"},[s("div",Vn,[s("div",{class:f(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",t.id===a.value.id?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-500"])},i(t.prenom[0])+i(t.nom[0]),3),s("div",null,[s("p",Rn,[b(i(t.prenom)+" "+i(t.nom)+" ",1),t.id===a.value.id?(n(),l("span",Nn,"(vous)")):d("",!0)])])]),s("div",En,[s("p",null,i(ht(t.id))+" jour(s) de présence",1),s("p",null,i(kt(t.id))+" tâche(s) assignée(s)",1)])]))),128))]))])])):d("",!0)],64))])):d("",!0)])):d("",!0)])):(n(),l("div",Zt,[s("div",es,[c(r,{to:"/",class:"inline-flex items-center gap-2 text-gray-500 mb-6 hover:text-gray-700 transition-colors text-sm"},{default:H(()=>[c(x(qe),{size:16}),e[47]||(e[47]=b(" Retour au site ",-1))]),_:1}),s("div",ts,[c(x(Rt),{size:32,class:"text-yellow-600"})]),e[51]||(e[51]=s("h1",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Accès en attente",-1)),s("p",ss,[e[48]||(e[48]=b(" Votre candidature n'a pas encore été acceptée, ou vous n'avez pas encore fait de demande de bénévolat avec l'email ",-1)),s("strong",null,i(W.value.user.email),1),e[49]||(e[49]=b(". ",-1))]),s("div",os,[c(r,{to:"/benevole",class:"block w-full bg-emerald-600 text-white py-3 rounded-xl hover:bg-emerald-700 transition-colors font-medium"},{default:H(()=>[...e[50]||(e[50]=[b(" Faire une demande de bénévolat ",-1)])]),_:1}),s("button",{onClick:$e,class:"block w-full border border-gray-300 text-gray-700 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium"}," Se déconnecter ")])])])):(n(),l("div",Wt,[s("div",Yt,[c(r,{to:"/",class:"inline-flex items-center gap-2 text-gray-500 mb-6 hover:text-gray-700 transition-colors text-sm"},{default:H(()=>[c(x(qe),{size:16}),e[36]||(e[36]=b(" Retour au site ",-1))]),_:1}),s("div",Xt,[c(x(Pe),{size:32,class:"text-emerald-600"})]),e[45]||(e[45]=s("h1",{class:"text-2xl font-semibold text-gray-900"},"Espace Bénévole",-1)),e[46]||(e[46]=s("p",{class:"text-gray-500 mt-2 text-sm mb-8"}," Vous devez avoir un compte sur le site et avoir été accepté(e) comme bénévole pour accéder à cet espace. ",-1)),s("div",Kt,[c(r,{to:"/connexion",class:"block w-full bg-emerald-600 text-white py-3 rounded-xl hover:bg-emerald-700 transition-colors font-medium"},{default:H(()=>[...e[37]||(e[37]=[b(" Se connecter ",-1)])]),_:1}),c(r,{to:"/inscription",class:"block w-full border border-gray-300 text-gray-700 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium"},{default:H(()=>[...e[38]||(e[38]=[b(" Créer un compte ",-1)])]),_:1})]),s("div",Qt,[s("p",Gt,[e[40]||(e[40]=b(" 1. Créez un compte sur le site",-1)),e[41]||(e[41]=s("br",null,null,-1)),e[42]||(e[42]=b(" 2. Faites une demande sur la page ",-1)),c(r,{to:"/benevole",class:"text-emerald-600 hover:underline"},{default:H(()=>[...e[39]||(e[39]=[b("Devenir Bénévole",-1)])]),_:1}),e[43]||(e[43]=s("br",null,null,-1)),e[44]||(e[44]=b(" 3. Une fois accepté(e), revenez ici ",-1))])])])])),g.value?(n(),l("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e[34]||(e[34]=F(t=>g.value=null,["self"]))},[s("div",{class:"absolute inset-0 bg-black/40",onClick:e[29]||(e[29]=t=>g.value=null)}),s("div",Tn,[s("div",An,[s("div",null,[s("h3",Pn,i(We(g.value)),1),s("p",Un,"Jour "+i(Se(g.value))+" du Ramadan",1)]),s("button",{onClick:e[30]||(e[30]=t=>g.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors p-1"},[c(x(B),{size:20})])]),s("div",Fn,[s("div",Bn,[e[89]||(e[89]=s("div",null,[s("p",{class:"font-medium text-gray-800"},"Votre présence"),s("p",{class:"text-xs text-gray-500"},"Serez-vous disponible ce jour ?")],-1)),s("button",{onClick:e[31]||(e[31]=t=>tt(g.value)),class:f([ee(g.value)?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-gray-200 text-gray-600 hover:bg-gray-300","px-5 py-2.5 rounded-xl text-sm font-medium transition-colors"])},i(ee(g.value)?"Présent":"Absent"),3)]),me(g.value)>0?(n(),l("div",Ln,[s("p",In," Bénévoles présents ("+i(me(g.value))+") ",1),s("div",On,[ee(g.value)?(n(),l("span",Jn,i(I.value)+" (vous) ",1)):d("",!0),(n(!0),l(y,null,h(et(g.value),t=>(n(),l("span",{key:t,class:"text-xs bg-gray-100 text-gray-600 px-2.5 py-1 rounded-lg"},i(t),1))),128))])])):d("",!0),s("div",null,[e[90]||(e[90]=s("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Tâches du jour",-1)),oe(g.value).length>0?(n(),l("div",Hn,[(n(!0),l(y,null,h(oe(g.value),t=>(n(),l("div",{key:t.id,class:"flex items-center justify-between gap-2 bg-blue-50/50 rounded-lg px-3 py-2"},[s("div",Wn,[s("button",{onClick:u=>Me(t),class:f([t.fait?"bg-emerald-100 text-emerald-600":"bg-gray-200 text-gray-400","w-6 h-6 rounded flex items-center justify-center flex-shrink-0 text-xs font-bold transition-colors"])},i(t.fait?"✓":""),11,Yn),s("span",{class:f(t.fait?"line-through text-gray-400":"text-gray-700")},i(t.nom),3)]),s("div",Xn,[pe(t.equipe_id)?(n(),l("span",Kn,i(pe(t.equipe_id)),1)):d("",!0),ve(t.benevole_id)?(n(),l("span",Qn,i(ve(t.benevole_id)),1)):d("",!0),!t.benevole_id&&!t.equipe_id?(n(),l("button",{key:2,onClick:u=>Ve(t),class:"text-[11px] text-emerald-600 hover:underline"}," Prendre ",8,Gn)):d("",!0),Y.value||t.created_by===a.value.id?(n(),l("button",{key:3,onClick:u=>Re(t.id),class:"text-gray-300 hover:text-red-500 transition-colors"},[c(x(B),{size:14})],8,Zn)):d("",!0)])]))),128))])):(n(),l("p",el,"Aucune tâche pour ce jour.")),s("form",{onSubmit:F(Qe,["prevent"]),class:"flex gap-2"},[j(s("input",{"onUpdate:modelValue":e[32]||(e[32]=t=>Z.value=t),placeholder:"Ajouter une tâche...",class:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:border-emerald-600"},null,512),[[D,Z.value]]),s("button",{type:"submit",disabled:!Z.value.trim(),class:"bg-emerald-600 text-white px-3 py-2 rounded-lg hover:bg-emerald-700 text-sm disabled:opacity-40"},[c(x(fe),{size:16})],8,tl)],32)]),ne(g.value).length>0?(n(),l("div",sl,[e[91]||(e[91]=s("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Courses pour ce jour",-1)),s("div",ol,[(n(!0),l(y,null,h(ne(g.value),t=>(n(),l("div",{key:t.id,class:"flex items-center gap-2 text-sm"},[s("span",{class:f(["w-1.5 h-1.5 rounded-full flex-shrink-0",t.en_stock?"bg-emerald-500":"bg-red-400"])},null,2),s("span",{class:f(t.en_stock?"line-through text-gray-400":"text-gray-700")},[b(i(t.nom),1),t.quantite?(n(),l(y,{key:0},[b(" ("+i(t.quantite)+")",1)],64)):d("",!0)],2),t.responsable_nom?(n(),l("span",nl,i(t.responsable_nom),1)):d("",!0)]))),128))])])):d("",!0),s("div",null,[e[92]||(e[92]=s("p",{class:"text-sm font-medium text-gray-700 mb-3"},"Notes partagées",-1)),Ne(g.value).length>0?(n(),l("div",ll,[(n(!0),l(y,null,h(Ne(g.value),t=>(n(),l("div",{key:t.id,class:"bg-gray-50 rounded-xl px-4 py-3"},[s("div",al,[s("div",il,[s("p",rl,i(t.contenu),1),s("p",dl,i(t.auteur_nom)+" · "+i(Ee(t.created_at)),1)]),Y.value||t.benevole_id===a.value.id?(n(),l("button",{key:0,onClick:u=>it(t.id),class:"text-gray-300 hover:text-red-500 transition-colors flex-shrink-0 p-0.5"},[c(x(B),{size:14})],8,ul)):d("",!0)])]))),128))])):(n(),l("p",ml,"Aucune note pour ce jour.")),s("form",{onSubmit:F(at,["prevent"]),class:"flex gap-2"},[j(s("input",{"onUpdate:modelValue":e[33]||(e[33]=t=>O.value=t),placeholder:"Écrire une note...",class:"flex-1 px-4 py-2.5 border rounded-xl text-sm focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[D,O.value]]),s("button",{type:"submit",disabled:!O.value.trim(),class:"bg-emerald-600 text-white px-4 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors text-sm font-medium disabled:opacity-40"}," Ajouter ",8,cl)],32)])])])])):d("",!0)])}}};export{wl as default};
