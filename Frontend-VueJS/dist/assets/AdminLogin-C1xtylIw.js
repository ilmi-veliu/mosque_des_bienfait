import{c as w,r as i,b as n,d,e as t,f as r,u,A as h,k as _,t as k,i as v,v as x,g as b,w as V,h as M,E as z,z as c}from"./index-DFNxEs4S.js";import{L}from"./lock-B8cp9At5.js";import{M as q}from"./mail-CoqE2H2z.js";import{L as C}from"./log-in-DrqiF6q_.js";/**
 * @license lucide-vue-next v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=w("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),B={class:"min-h-screen bg-[#030213] flex items-center justify-center px-4"},D={class:"max-w-md w-full"},E={class:"text-center mb-8"},N={class:"w-16 h-16 bg-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4"},j={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm"},I={class:"relative"},S={class:"relative"},R=["disabled"],T={key:0},U={key:1,class:"flex items-center justify-center gap-2"},K={class:"text-center mt-6"},H={__name:"AdminLogin",setup(O){const y=z(),l=i(""),m=i(""),s=i(!1),o=i(""),g=async()=>{s.value=!0,o.value="";const{error:p}=await c.auth.signInWithPassword({email:l.value,password:m.value});if(p){o.value="Email ou mot de passe incorrect.",s.value=!1;return}const{data:e}=await c.from("benevoles").select("role").eq("email",l.value).eq("statut","accepté");if(!(e==null?void 0:e.find(a=>["admin","superadmin"].includes(a.role)))){o.value="Vous n'avez pas les droits d'administration.",await c.auth.signOut(),s.value=!1;return}y.push("/admin/dashboard")};return(p,e)=>{const f=M("router-link");return d(),n("div",B,[t("div",D,[t("div",E,[t("div",N,[r(u(L),{size:32,class:"text-white"})]),e[2]||(e[2]=t("h1",{class:"text-3xl font-semibold text-white"},"Administration",-1)),e[3]||(e[3]=t("p",{class:"text-gray-400 mt-2"},"Mosquée des Bienfaisants",-1))]),t("form",{onSubmit:h(g,["prevent"]),class:"bg-white rounded-2xl shadow-xl p-8 space-y-6"},[o.value?(d(),n("div",j,k(o.value),1)):_("",!0),t("div",null,[e[4]||(e[4]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),t("div",I,[r(u(q),{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),v(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),type:"email",required:"",placeholder:"admin@exemple.com",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[x,l.value]])])]),t("div",null,[e[5]||(e[5]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe",-1)),t("div",S,[r(u(A),{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),v(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),type:"password",required:"",placeholder:"Votre mot de passe",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:border-emerald-600 transition-colors"},null,512),[[x,m.value]])])]),t("button",{type:"submit",disabled:s.value,class:"w-full bg-gradient-to-r from-emerald-600 to-teal-700 text-white py-3 rounded-xl font-semibold hover:from-emerald-700 hover:to-teal-800 transition-all disabled:opacity-50"},[s.value?(d(),n("span",T,"Connexion...")):(d(),n("span",U,[r(u(C),{size:18}),e[6]||(e[6]=b(" Se connecter ",-1))]))],8,R)],32),t("div",K,[r(f,{to:"/",class:"text-gray-400 hover:text-white transition-colors text-sm"},{default:V(()=>[...e[7]||(e[7]=[b(" Retour au site ",-1)])]),_:1})])])])}}};export{H as default};
