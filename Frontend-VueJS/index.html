<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mosqu√©e des Bienfaisants</title>
</head>
<body>
  <div id="app"></div>
  <script type="module" src="/src/main.js"></script>

  <!-- ‚ùå ANCIEN CODE TAWK.TO SUPPRIM√â - il sera charg√© seulement apr√®s consentement -->
  
  <!-- Banni√®re de consentement cookies RGPD -->
  <div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; width: 100%; background: #2c3e50; color: white; padding: 20px; text-align: center; display: none; z-index: 99999; box-shadow: 0 -2px 10px rgba(0,0,0,0.3);">
    <p style="margin: 0 0 15px 0; font-size: 16px;">
      üç™ Ce site utilise des cookies pour le chat en ligne afin de vous permettre de contacter la mosqu√©e. 
      <a href="/politique-confidentialite" style="color: #3498db; text-decoration: underline;">En savoir plus</a>
    </p>
    <button onclick="acceptCookies()" style="background: #27ae60; color: white; padding: 12px 30px; border: none; cursor: pointer; margin: 0 10px; border-radius: 5px; font-size: 16px; font-weight: bold;">
      ‚úì Accepter
    </button>
    <button onclick="refuseCookies()" style="background: #e74c3c; color: white; padding: 12px 30px; border: none; cursor: pointer; border-radius: 5px; font-size: 16px; font-weight: bold;">
      ‚úó Refuser
    </button>
  </div>

  <!-- Script de gestion des cookies et Tawk.to -->
  <script>
    // V√©rifier si l'utilisateur a d√©j√† fait un choix
    if (!localStorage.getItem('cookieConsent')) {
      document.getElementById('cookie-banner').style.display = 'block';
    }

    function acceptCookies() {
      localStorage.setItem('cookieConsent', 'accepted');
      document.getElementById('cookie-banner').style.display = 'none';
      // Charger Tawk.to apr√®s acceptation
      loadTawkTo();
    }

    function refuseCookies() {
      localStorage.setItem('cookieConsent', 'refused');
      document.getElementById('cookie-banner').style.display = 'none';
      alert('Le chat en ligne ne sera pas disponible sans l\'acceptation des cookies. Vous pouvez nous contacter par t√©l√©phone ou email.');
    }

    function loadTawkTo() {
      var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
      (function(){
        var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = 'https://embed.tawk.to/68ee9823ab07261951f59f2d/1j7i04j9u';
        s1.charset = 'UTF-8';
        s1.setAttribute('crossorigin','*');
        s0.parentNode.insertBefore(s1, s0);
      })();
    }

    // Si l'utilisateur a d√©j√† accept√© les cookies, charger Tawk.to automatiquement
    if (localStorage.getItem('cookieConsent') === 'accepted') {
      loadTawkTo();
    }
  </script>
</body>
</html>